var me=Object.defineProperty;var ue=(n,o,s)=>o in n?me(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s;var ee=(n,o,s)=>ue(n,typeof o!="symbol"?o+"":o,s);import{j as e,r as k}from"./index-CRqBoKz1.js";import{c as M,L as fe}from"./Layout-DsdP9xsA.js";const H=n=>n.map(o=>[...o]),V=(n,o,s)=>{const{piece:r,direction:i,steps:c=1}=s,a=H(n),g={...o},u=g[r];if(!u)throw new Error(`Piece ${r} not found`);const m=[...u.positions];for(const d of m)a[d.row][d.col]=".";let t=[];for(let d=0;d<c;d++)if(d===0?t=oe(m,i):t=oe(t,i),!ge(t,a)){if(d>0)break;t=m;break}g[r]={...u,positions:t};for(const d of t)a[d.row][d.col]=r;return{board:a,pieces:g}};function oe(n,o){return n.map(s=>{const r={...s};switch(o){case"atas":r.row-=1;break;case"bawah":r.row+=1;break;case"kiri":r.col-=1;break;case"kanan":r.col+=1;break}return r})}function ge(n,o){return n.every(s=>s.row<0||s.row>=o.length||s.col<0||s.col>=o[0].length?!1:o[s.row][s.col]==="."||o[s.row][s.col]==="K")}const R=n=>n.map(o=>o.join("")).join(""),_={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},pe={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},q=(n,o)=>{const s=[],r=n.length,i=n[0].length,c=o.K,a=c==null?void 0:c.positions[0],g=(a==null?void 0:a.col)===0&&a.row<r,u=(a==null?void 0:a.row)===0&&a.col<i,m=(a==null?void 0:a.col)===i-1&&a.row<r,t=(a==null?void 0:a.row)===r-1&&a.col<i;return Object.values(o).forEach(d=>{if(d.isExit)return;const{orientation:h,symbol:w}=d;if(h){if(h==="horizontal"){const x=d.positions[0];if(x.col>0&&!(g&&x.col===1&&!d.isPrimary)){let f=0,l=!0;for(;l&&x.col-f-1>=0;){const b=n[x.row][x.col-f-1];b==="."?(f++,s.push({piece:w,direction:_.LEFT,steps:f})):(b==="K"&&d.isPrimary&&(f++,s.push({piece:w,direction:_.LEFT,steps:f})),l=!1)}}const v=d.positions[d.positions.length-1];if(v.col<i-1&&!(m&&v.col===i-2&&!d.isPrimary)){let f=0,l=!0;for(;l&&v.col+f+1<i;){const b=n[v.row][v.col+f+1];b==="."?(f++,s.push({piece:w,direction:_.RIGHT,steps:f})):(b==="K"&&d.isPrimary&&(f++,s.push({piece:w,direction:_.RIGHT,steps:f})),l=!1)}}}else if(h==="vertical"){const x=d.positions[0];if(x.row>0&&!(u&&x.row===1&&!d.isPrimary)){let f=0,l=!0;for(;l&&x.row-f-1>=0;){const b=n[x.row-f-1][x.col];b==="."?(f++,s.push({piece:w,direction:_.UP,steps:f})):(b==="K"&&d.isPrimary&&(f++,s.push({piece:w,direction:_.UP,steps:f})),l=!1)}}const v=d.positions[d.positions.length-1];if(v.row<r-1&&!(t&&v.row===r-2&&!d.isPrimary)){let f=0,l=!0;for(;l&&v.row+f+1<r;){const b=n[v.row+f+1][v.col];b==="."?(f++,s.push({piece:w,direction:_.DOWN,steps:f})):(b==="K"&&d.isPrimary&&(f++,s.push({piece:w,direction:_.DOWN,steps:f})),l=!1)}}}}}),s},X=n=>{const o=Object.values(n).find(i=>i.isPrimary);if(!o)return!1;const s=n.K;if(!s)return!1;const r=s.positions[0];if(o.orientation==="horizontal"){const i=o.positions[0];if(r.col<i.col)return i.row===r.row&&i.col===r.col+1;if(r.col>o.positions[o.positions.length-1].col){const c=o.positions[o.positions.length-1];return c.row===r.row&&c.col+1===r.col}}else if(o.orientation==="vertical"){const i=o.positions[0],c=o.positions[o.positions.length-1];if(r.row<i.row)return i.col===r.col&&i.row===r.row+1;if(r.row>c.row)return c.col===r.col&&c.row+1===r.row}return o.positions.some(i=>i.row===r.row&&i.col===r.col)};class Y{constructor(o){ee(this,"items",[]);ee(this,"comparator");this.comparator=o}push(o){let s=this.items.length;for(this.items.push(o);s>0;){const r=Math.floor((s-1)/2);if(this.comparator(this.items[r],this.items[s])<=0)break;[this.items[r],this.items[s]]=[this.items[s],this.items[r]],s=r}}pop(){if(this.isEmpty())return;const o=this.items[0],s=this.items.pop();return this.items.length>0&&(this.items[0]=s,this.heapify(0)),o}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(o){const s=2*o+1,r=2*o+2;let i=o;s<this.items.length&&this.comparator(this.items[s],this.items[i])<0&&(i=s),r<this.items.length&&this.comparator(this.items[r],this.items[i])<0&&(i=r),i!==o&&([this.items[o],this.items[i]]=[this.items[i],this.items[o]],this.heapify(i))}}const be=(n,o,s)=>{const r=n.length*n[0].length*50,i=performance.now(),c=new Set,a=new Y((t,d)=>t.f-d.f);let g=0;const u={board:n,pieces:o,stateString:R(n),cost:0,heuristic:s(n,o),f:s(n,o),moves:[]};for(a.push(u);!a.isEmpty();){g++;const t=a.pop();if(c.has(t.stateString))continue;if(c.add(t.stateString),X(t.pieces)){const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:h-i}}if(t.cost>r)continue;const d=q(t.board,t.pieces);for(const h of d){const{board:w,pieces:x}=V(t.board,t.pieces,h),v=R(w);if(c.has(v))continue;const f=s(w,x),l=t.cost+1;if(l>r)continue;const b={board:w,pieces:x,stateString:v,cost:l,heuristic:f,f:l+f,moves:[...t.moves,h]};a.push(b)}}const m=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:m-i}},xe=(n,o)=>{const s=n.length*n[0].length*50,r=performance.now(),i=new Map,c=new Y((m,t)=>m.cost-t.cost);let a=0;const g={board:n,pieces:o,stateString:R(n),cost:0,moves:[]};for(c.push(g),i.set(g.stateString,0);!c.isEmpty();){a++;const m=c.pop(),t=m.stateString;if(m.cost>(i.get(t)||1/0))continue;if(X(m.pieces)){const h=performance.now();return{solved:!0,moves:m.moves,nodesVisited:a,executionTime:h-r}}if(m.cost>s)continue;const d=q(m.board,m.pieces);for(const h of d){const{board:w,pieces:x}=V(m.board,m.pieces,h),v=R(w),f=m.cost+1;if(f<(i.get(v)||1/0)){i.set(v,f);const l={board:w,pieces:x,stateString:v,cost:f,moves:[...m.moves,h]};c.push(l)}}}const u=performance.now();return{solved:!1,moves:[],nodesVisited:a,executionTime:u-r}},we=(n,o,s)=>{const r=n.length*n[0].length*50,i=performance.now(),c=new Set,a=new Y((t,d)=>t.heuristic-d.heuristic);let g=0;const u={board:n,pieces:o,stateString:R(n),heuristic:s(n,o),moves:[],cost:0};for(a.push(u);!a.isEmpty();){g++;const t=a.pop();if(c.has(t.stateString))continue;if(c.add(t.stateString),X(t.pieces)){const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:h-i}}if(t.cost>r)continue;const d=q(t.board,t.pieces);for(const h of d){const{board:w,pieces:x}=V(t.board,t.pieces,h),v=R(w);if(c.has(v))continue;const f=s(w,x),l=t.cost+1;if(l<=r){const b={board:w,pieces:x,stateString:v,heuristic:f,moves:[...t.moves,h],cost:l};a.push(b)}}}const m=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:m-i}},ve=(n,o)=>{const s=n.length*n[0].length*50,r=performance.now(),i=new Set,c=new Y((t,d)=>t.cost-d.cost);let a=0;const g={board:n,pieces:o,stateString:R(n),cost:0,moves:[]};c.push(g);let u={cost:1/0,moves:[]};for(;!c.isEmpty();){a++;const t=c.pop();if(i.has(t.stateString))continue;if(i.add(t.stateString),X(t.pieces)){(!u||t.cost<u.cost)&&(u={cost:t.cost,moves:[...t.moves]});const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:a,executionTime:h-r}}if(t.cost>s)continue;const d=q(t.board,t.pieces);for(const h of d){const w=V(t.board,t.pieces,h),x=R(w.board);if(i.has(x))continue;const v={board:w.board,pieces:w.pieces,stateString:x,cost:t.cost+1,moves:[...t.moves,h]};c.push(v)}}const m=performance.now();return{solved:u.cost!==1/0,moves:u.moves,nodesVisited:a,executionTime:m-r}},A={manhattan:(n,o)=>{const s=Object.values(o).find(i=>i.isPrimary),r=o.K.positions[0];if(s.orientation==="horizontal")if(r.col<s.positions[0].col){const i=s.positions[0];return Math.abs(i.row-r.row)+Math.abs(i.col-r.col-1)}else{const i=s.positions[s.positions.length-1];return Math.abs(i.row-r.row)+Math.abs(i.col+1-r.col)}else{const i=s.positions.map(c=>Math.abs(c.row-r.row)+Math.abs(c.col-r.col));return Math.min(...i)}},blockingVehicles:(n,o)=>{const s=Object.values(o).find(c=>c.isPrimary),r=o.K.positions[0];if(s.orientation==="horizontal"){const c=s.positions[0].row;if(r.col<s.positions[0].col){const a=s.positions[0].col;let g=0;for(let u=r.col+1;u<a;u++)n[c][u]!=="."&&n[c][u]!=="K"&&g++;return g}else{const a=s.positions[s.positions.length-1].col;let g=0;for(let u=a+1;u<=r.col;u++)n[c][u]!=="."&&n[c][u]!=="K"&&g++;return g}}const i=s.positions[0].col;if(r.row<s.positions[0].row){const c=s.positions[0].row;let a=0;for(let g=r.row+1;g<c;g++)n[g][i]!=="."&&n[g][i]!=="K"&&a++;return a}else{const c=s.positions[s.positions.length-1].row;let a=0;for(let g=c+1;g<=r.row;g++)n[g][i]!=="."&&n[g][i]!=="K"&&a++;return a}},combined:(n,o)=>A.manhattan(n,o)+3*A.blockingVehicles(n,o)},ye=(n,o,s)=>{const r=n.length*n[0].length*50,i=performance.now();let c=0;const a=s===A.blockingVehicles||s===A.combined,g=(x,v)=>a?Math.max(1,Math.min(A.manhattan(x,v),s(x,v))):s(x,v),u=new Map,m={board:n,pieces:o,stateString:R(n),cost:0,heuristic:g(n,o),f:g(n,o),moves:[]};u.set(m.stateString,0);let t=[m],d=[],h=m.f;for(;t.length>0||d.length>0;){if(t.length===0){if(d.length===0)break;let f=1/0;for(const l of d)f=Math.min(f,l.f);if(t=d.filter(l=>l.f===f),d=d.filter(l=>l.f>f),h=f,h>=r)break}const x=t.shift();if(c++,X(x.pieces)){const f=performance.now();return{solved:!0,moves:x.moves,nodesVisited:c,executionTime:f-i}}if(x.cost>=r)continue;const v=q(x.board,x.pieces);for(const f of v){const{board:l,pieces:b}=V(x.board,x.pieces,f),N=R(l),y=x.cost+1,P=u.get(N);if(P!==void 0&&P<=y)continue;u.set(N,y);const C=g(l,b),K=y+C,z={board:l,pieces:b,stateString:N,cost:y,heuristic:C,f:K,moves:[...x.moves,f]};K<=h?t.unshift(z):d.push(z)}}const w=performance.now();return{solved:!1,moves:[],nodesVisited:c,executionTime:w-i}},B={greedy:we,ucs:ve,astar:be,dijkstra:xe,fringe:ye},je=n=>{const o={},s=n.map(m=>m.split("")),r=new Set,i=new Set;let c=0;const a=24,g=m=>m==="."||m===" ",u=(m,t)=>{if(g(m)||g(t))return!1;const d=h=>/^[A-Za-z]$/.test(h);return d(m)&&d(t)?m===t:!1};for(let m=0;m<s.length;m++)for(let t=0;t<s[m].length;t++){const d=s[m][t],h=`${m},${t}`;if(!r.has(h)){if(g(d)){r.add(h);continue}if(d!=="K"){if(i.has(d))throw new Error(`Duplicate piece symbol '${d}' detected. Each letter can only be used once.`);if(c>=a)throw new Error(`Maximum number of pieces (${a}) exceeded.`);const w=[],x=[{row:m,col:t}],v=new Set;for(v.add(h);x.length>0;){const f=x.shift();w.push(f),r.add(`${f.row},${f.col}`);const l=[[-1,0],[1,0],[0,-1],[0,1]];for(const[b,N]of l){const y=f.row+b,P=f.col+N,C=`${y},${P}`;y>=0&&y<s.length&&P>=0&&P<s[y].length&&u(s[y][P],d)&&!v.has(C)&&(x.push({row:y,col:P}),v.add(C))}}o[d]={positions:w,symbol:d},i.add(d),c++}else d==="K"&&(o.K={positions:[{row:m,col:t}],symbol:"K",isExit:!0},r.add(h))}}return Object.values(o).forEach(m=>{if(m.isExit)return;const{positions:t}=m;if(m.size=t.length,t.length>1){const d=t.every(h=>h.row===t[0].row);if(m.orientation=d?"horizontal":"vertical",m.orientation==="horizontal"){t.sort((h,w)=>h.col-w.col);for(let h=1;h<t.length;h++)if(t[h].col!==t[h-1].col+1)throw new Error(`Piece ${m.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{t.sort((h,w)=>h.row-w.row);for(let h=1;h<t.length;h++)if(t[h].row!==t[h-1].row+1)throw new Error(`Piece ${m.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else m.orientation="unknown";m.primaryPosition=t[0],m.isPrimary=m.symbol==="P"}),o},Ne=n=>{const o=n.replace(/\r/g,"").trim().split(`
`);if(o.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[s,r,...i]=o,[c,a]=s.split(" ").map(Number),g=parseInt(r);if(!Number.isInteger(c)||!Number.isInteger(a)||c<=0||a<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(g)||g<0)throw new Error("Invalid number of pieces.");const u={col:-1,row:-1};for(let l=0;l<i.length;l++){const b=i[l];if(b.includes("K")){if(u.col!==-1)throw new Error("There should be only one K in the board.");u.row=l,u.col=b.indexOf("K")}}if(u.col===-1||u.row===-1)throw new Error("There should be one K in the board.");const m=u.col===0&&u.col<a,t=u.col<=c&&u.row===0,d=u.col===c&&u.row<a,h=u.col<c&&u.row===a;if(!m&&!t&&!d&&!h)throw new Error("K shouldnt be in the middle of the board.");if(i.length!==a+(t||h?1:0))throw new Error(`Expected ${a} rows in boardConfig, got ${i.length}.`);i.forEach((l,b)=>{if(console.log(m,t,d,h),m&&t){if(!l.includes("K")&&l.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(m&&h){if(!l.includes("K")&&l.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(d&&t){if(!l.includes("K")&&l.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(d&&h){if(!l.includes("K")&&l.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(m){if(l.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(d){if(l.includes("K")){if(l.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(l.length!==c&&l.length!==c+1)throw new Error(`Each row must have ${c} or ${c+1} columns.`)}else if(t){if(b!=0&&l.length!==c)throw new Error(`Each row must have ${c} columns.`)}else if(h){if(b!=a&&l.length!==c)throw new Error(`Each row must have ${c} columns.`)}else throw new Error("Unknown K location.")});let w=-1;for(let l=0;l<i.length;l++){const b=i[l].indexOf("P");if(b!==-1){w=b;break}}if(w===-1)throw new Error("Primary piece (P) not found on the board.");if((h||t)&&i[h?a:0].indexOf("K")!==w)throw new Error("Exit (K) must be aligned with the primary piece (P).");const x=new Set;i.forEach(l=>{for(const b of l)b!=="."&&b!==" "&&b!=="K"&&b!=="P"&&x.add(b)});const v=x.size;if(v!==g)throw new Error(`Mismatch in piece count: Input specifies ${g} pieces, but ${v} unique pieces found on board.`);const f={};i.forEach((l,b)=>{for(let N=0;N<l.length;N++){const y=l[N];y!=="."&&y!==" "&&y!=="K"&&(f[y]||(f[y]=[]),f[y].push({row:b,col:N}))}});for(const[l,b]of Object.entries(f)){const N=Math.min(...b.map(j=>j.row)),y=Math.max(...b.map(j=>j.row)),P=Math.min(...b.map(j=>j.col)),C=Math.max(...b.map(j=>j.col)),K=y-N+1,z=C-P+1,Z=K*z;if(b.length!==Z)throw new Error(`Piece ${l} is not a solid rectangle.`);if(z===1&&K===1)throw new Error(`Piece ${l} is a single square. It should be at least 2x1 or 1x2.`);if(z!==1&&K!==1)throw new Error(`Piece ${l} has invalid dimensions (${z}x${K}). At least one dimension must be 1.`);for(let j=N;j<=y;j++)for(let S=P;S<=C;S++)if(!b.some(W=>W.row===j&&W.col===S))throw new Error(`Piece ${l} is not solid (missing position at row ${j}, col ${S}).`)}return{dimensions:{A:c,B:a},numPieces:g,boardConfig:i,finishLocation:{col:u.col,row:u.row}}},Se=({isDarkMode:n,toggleDarkMode:o})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:o,className:`p-2 rounded-full ${n?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:n?"☀️":"🌙"})]}),e.jsx("p",{className:`mt-2 ${n?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ee=M("check",$e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],te=M("chevron-right",ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ce=M("clock",Pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],Ke=M("fast-forward",Te);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ie=M("hard-drive",ze);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Me=M("move-horizontal",Re);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],_e=M("pause",Oe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Le=M("play",Ae);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],Ve=M("rewind",He);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ge=M("upload",Fe),Ue=({isDarkMode:n,playSpeed:o,setPlaySpeed:s,isPlaying:r,playAnimation:i,stopAnimation:c,moveOneStep:a,applyStepMove:g,currentStep:u,solution:m,saveSolution:t})=>{const d=1100-o;return e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${n?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:d,onChange:h=>{const w=parseInt(h.target.value,10);s(1100-w)},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Slow"}),e.jsx("span",{children:"Fast"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>g(-1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(Ve,{size:18})}),e.jsx("button",{onClick:()=>a(!1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:u<0,title:"Previous step",children:e.jsx(te,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:r?c:i,className:`p-3 rounded-full ${r?n?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":n?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:r?"Pause":"Play",children:r?e.jsx(_e,{size:20}):e.jsx(Le,{size:20})}),e.jsx("button",{onClick:()=>a(!0),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:u>=((m==null?void 0:m.moves.length)||0)-1,title:"Next step",children:e.jsx(te,{size:18})}),e.jsx("button",{onClick:()=>g(m.moves.length-1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(Ke,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${n?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(u+1)/m.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",u===-1?"Start":u+1]}),e.jsxs("span",{children:["Total: ",m.moves.length]})]})]})]}),t&&e.jsxs("button",{onClick:t,className:`px-3 py-2 ${n?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"} text-white rounded-md text-sm font-medium w-full transition-colors shadow-sm flex items-center justify-center gap-1 mt-2`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Simpan Solusi ke File"]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),u>=0&&u<m.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]})},Be=({stats:n,isDarkMode:o})=>e.jsxs("div",{className:`mt-6 ${o?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:n.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[n.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:n.moves})]})]})]})]}),qe=({boardConfig:n,algorithm:o,setAlgorithm:s,heuristic:r,setHeuristic:i,solvePuzzle:c,isLoading:a,error:g,setError:u,stats:m,isDarkMode:t,handleFileUpload:d})=>e.jsxs("div",{className:`mb-8 ${t?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${t?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${t?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(Ge,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:d,onClick:()=>{g&&u(null)},className:"hidden"})]}),n&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx(Ee,{size:18})})]}),n&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",n.dimensions.A,"x",n.dimensions.B||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:o,onChange:h=>s(h.target.value),className:`w-full border ${t?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"}),e.jsx("option",{value:"fringe",children:"Fringe Search"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:o==="greedy"?"Optimizes for quick solutions using heuristics":o==="ucs"?"Finds the shortest path by exploring all options":o==="dijkstra"?"Finds the shortest path in weighted graphs":o==="astar"?"Combines heuristics with path cost for efficiency":"Fringe Search"})]}),o!=="ucs"&&o!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${t?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:r,onChange:h=>i(h.target.value),className:`w-full border ${t?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:r==="manhattan"?"Measures direct distance to exit":r==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsx("div",{className:"mt-6 flex items-center gap-4",children:e.jsx("button",{onClick:c,disabled:a||!n,className:`${t?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(te,{size:16,className:"ml-1"})]})})}),g&&e.jsxs("div",{className:`mt-4 ${t?"bg-red-900/30":"bg-red-50"} border ${t?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:g})]}),m&&e.jsx(Be,{stats:m,isDarkMode:t})]});function Qe(){const[n,o]=k.useState(null),[s,r]=k.useState([]),[i,c]=k.useState({}),[a,g]=k.useState("greedy"),[u,m]=k.useState("manhattan"),[t,d]=k.useState(null),[h,w]=k.useState(-1),[x,v]=k.useState(!1),[f,l]=k.useState(null),[b,N]=k.useState([]),[y,P]=k.useState(null),[C,K]=k.useState(!1),[z,Z]=k.useState(500),j=k.useRef(null),[S,W]=k.useState(!1);k.useEffect(()=>{d(null),P(null),w(-1),G(),s.length>0&&N(H(s))},[a,s,u]);const ne=p=>{var I;const $=(I=p.target.files)==null?void 0:I[0];if(!$)return;v(!0),l(""),d(null),P(null),w(-1),G(),r([]),c({}),N([]),o(null),g("greedy"),m("manhattan");const E=new FileReader;E.onload=F=>{var U;try{const T=(U=F.target)==null?void 0:U.result,O=Ne(T),J=O.boardConfig.map(D=>D.split("")),Q=je(O.boardConfig);o(O),r(J),c(Q),N(J),v(!1)}catch(T){T instanceof Error?l("Error parsing file: "+(T==null?void 0:T.message)):l("An unknown error occurred"),v(!1)}},E.onerror=()=>{l("Error reading file"),v(!1)},E.readAsText($),p.target.value=""},ie=()=>{if(!s.length||!Object.keys(i).length){l("Please upload a valid board configuration first.");return}l(""),v(!0),d(null),P(null),w(-1),G(),setTimeout(()=>{try{let p;if(a==="greedy")p=B.greedy(s,i,A[u]);else if(a==="ucs")p=B.ucs(s,i);else if(a==="astar")p=B.astar(s,i,A[u]);else if(a==="dijkstra")p=B.dijkstra(s,i);else if(a==="fringe")p=B.fringe(s,i,A[u]);else throw new Error("Invalid algorithm");p.solved?(d(p),P({nodesVisited:p.nodesVisited,executionTime:p.executionTime.toFixed(2),moves:p.moves.length}),N(H(s))):l("No solution found"),v(!1)}catch(p){p instanceof Error?l("Error solving puzzle: "+(p==null?void 0:p.message)):l("An unknown error occurred"),v(!1)}},50)},L=k.useCallback(p=>{if(!t||p<-1||p>=t.moves.length)return;let $=H(s),E={...i};if(p===-1){N(H(s)),w(-1);return}for(let I=0;I<=p;I++){const F=V($,E,t.moves[I]);$=F.board,E=F.pieces}N($),w(p)},[s,i,t]),se=()=>{s.length&&(N(H(s)),w(-1),G())},re=()=>{!t||t.moves.length===0||(h>=t.moves.length-1&&se(),K(!0))},G=()=>{K(!1),j.current&&(clearTimeout(j.current),j.current=null)};k.useEffect(()=>{if(!C||!t)return;j.current&&clearTimeout(j.current);const p=h+1;if(p>=t.moves.length){K(!1);return}const $=t.moves[p],E=z/($.steps||1);return j.current=setTimeout(()=>{L(p)},E),()=>{j.current&&clearTimeout(j.current)}},[C,h,t,z,L]);const ce=p=>{t&&(p&&h<t.moves.length-1?L(h+1):!p&&h>-1&&L(h-1))};k.useEffect(()=>()=>{j.current&&clearTimeout(j.current)},[]);const le=p=>{const $=S?"bg-gray-800":"bg-gray-200";if(p==="P")return"bg-red-500 text-white shadow-md";if(p==="K")return"bg-green-500 text-white shadow-md";if(t&&h>=0&&h<t.moves.length){const E=t.moves[h];if(E&&p===E.piece)return"bg-yellow-500 text-white shadow-md"}return p!=="."?`${pe[p]||"bg-gray-500"} text-white shadow-md`:$},ae=()=>{W(!S)},de=()=>{if(!t||!s.length)return;let p=`Papan Awal
`;const $=s.map(O=>O.join("")).join(`
`);p+=$+`


`;let E=H(s),I={...i};t.moves.forEach((O,J)=>{const Q=V(E,I,O);E=Q.board,I=Q.pieces,p+=`Gerakan ${J+1}: ${O.piece}-${O.direction}
`;const D=E.map(he=>he.join("")).join(`
`);p+=D+`


`});const F=new Blob([p],{type:"text/plain"}),U=URL.createObjectURL(F),T=document.createElement("a");T.href=U,T.download="rush_hour_solution.txt",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(U)};return e.jsx(fe,{children:e.jsx("div",{className:`min-h-screen ${S?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(Se,{isDarkMode:S,toggleDarkMode:ae}),e.jsxs("div",{className:"relative",children:[x&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${S?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(qe,{setBoard:r,boardConfig:n,setBoardConfig:o,algorithm:a,setAlgorithm:g,heuristic:u,setHeuristic:m,solvePuzzle:ie,isLoading:x,resetBoard:se,error:f,setError:l,stats:y,isDarkMode:S,handleFileUpload:ne})]}),b.length>0&&e.jsxs("div",{className:`mb-8 ${S?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${S?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${S?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:b.map((p,$)=>e.jsx("div",{className:"flex",children:p.map((E,I)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${le(E)} transition-all duration-300`,children:E!=="."?E:""},`cell-${$}-${I}`))},`row-${$}`))}),t&&e.jsx(Ue,{isDarkMode:S,playSpeed:z,setPlaySpeed:Z,isPlaying:C,playAnimation:re,stopAnimation:G,moveOneStep:ce,applyStepMove:L,currentStep:h,solution:t,saveSolution:de})]})]}),t&&t.moves.length>0&&e.jsxs("div",{className:`${S?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${S?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>L(-1),className:`cursor-pointer p-3 rounded-lg ${h===-1?S?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":S?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),t.moves.map((p,$)=>e.jsxs("div",{onClick:()=>L($),className:`cursor-pointer p-3 rounded-lg ${h===$?S?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":S?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",$+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",p.piece]})]}),e.jsxs("div",{className:`text-sm ${S?"text-gray-300":"text-gray-600"}`,children:["Direction: ",p.direction," ",p.steps>1?`(${p.steps} steps)`:""]})]},$))]})]})]})})})}export{Qe as default};

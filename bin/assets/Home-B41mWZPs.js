var me=Object.defineProperty;var ue=(i,o,s)=>o in i?me(i,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[o]=s;var Z=(i,o,s)=>ue(i,typeof o!="symbol"?o+"":o,s);import{j as e,r as N}from"./index---4Ntzif.js";import{c as K,L as ge}from"./Layout-Clsv1Qgj.js";const _=i=>i.map(o=>[...o]),M=(i,o,s)=>{const{piece:r,direction:n,steps:c=1}=s,d=_(i),g={...o},u=g[r];if(!u)throw new Error(`Piece ${r} not found`);const h=[...u.positions];for(const l of h)d[l.row][l.col]=".";let t=[];for(let l=0;l<c;l++)if(l===0?t=te(h,n):t=te(t,n),!fe(t,d)){if(l>0)break;t=h;break}g[r]={...u,positions:t};for(const l of t)d[l.row][l.col]=r;return{board:d,pieces:g}};function te(i,o){return i.map(s=>{const r={...s};switch(o){case"atas":r.row-=1;break;case"bawah":r.row+=1;break;case"kiri":r.col-=1;break;case"kanan":r.col+=1;break}return r})}function fe(i,o){return i.every(s=>s.row<0||s.row>=o.length||s.col<0||s.col>=o[0].length?!1:o[s.row][s.col]==="."||o[s.row][s.col]==="K")}const R=i=>i.map(o=>o.join("")).join(""),I={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},pe={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},q=(i,o)=>{const s=[],r=i.length,n=i[0].length,c=o.K,d=c==null?void 0:c.positions[0],g=(d==null?void 0:d.col)===0&&d.row<r,u=(d==null?void 0:d.row)===0&&d.col<n,h=(d==null?void 0:d.col)===n-1&&d.row<r,t=(d==null?void 0:d.row)===r-1&&d.col<n;return Object.values(o).forEach(l=>{if(l.isExit)return;const{orientation:a,symbol:b}=l;if(a){if(a==="horizontal"){const w=l.positions[0];if(w.col>0&&!(g&&w.col===1&&!l.isPrimary)){let m=0,f=!0;for(;f&&w.col-m-1>=0;){const v=i[w.row][w.col-m-1];v==="."?(m++,s.push({piece:b,direction:I.LEFT,steps:m})):(v==="K"&&l.isPrimary&&(m++,s.push({piece:b,direction:I.LEFT,steps:m})),f=!1)}}const x=l.positions[l.positions.length-1];if(x.col<n-1&&!(h&&x.col===n-2&&!l.isPrimary)){let m=0,f=!0;for(;f&&x.col+m+1<n;){const v=i[x.row][x.col+m+1];v==="."?(m++,s.push({piece:b,direction:I.RIGHT,steps:m})):(v==="K"&&l.isPrimary&&(m++,s.push({piece:b,direction:I.RIGHT,steps:m})),f=!1)}}}else if(a==="vertical"){const w=l.positions[0];if(w.row>0&&!(u&&w.row===1&&!l.isPrimary)){let m=0,f=!0;for(;f&&w.row-m-1>=0;){const v=i[w.row-m-1][w.col];v==="."?(m++,s.push({piece:b,direction:I.UP,steps:m})):(v==="K"&&l.isPrimary&&(m++,s.push({piece:b,direction:I.UP,steps:m})),f=!1)}}const x=l.positions[l.positions.length-1];if(x.row<r-1&&!(t&&x.row===r-2&&!l.isPrimary)){let m=0,f=!0;for(;f&&x.row+m+1<r;){const v=i[x.row+m+1][x.col];v==="."?(m++,s.push({piece:b,direction:I.DOWN,steps:m})):(v==="K"&&l.isPrimary&&(m++,s.push({piece:b,direction:I.DOWN,steps:m})),f=!1)}}}}}),s},W=i=>{const o=Object.values(i).find(n=>n.isPrimary);if(!o)return!1;const s=i.K;if(!s)return!1;const r=s.positions[0];if(o.orientation==="horizontal"){const n=o.positions[0];if(r.col<n.col)return n.row===r.row&&n.col===r.col+1;if(r.col>o.positions[o.positions.length-1].col){const c=o.positions[o.positions.length-1];return c.row===r.row&&c.col+1===r.col}}else if(o.orientation==="vertical"){const n=o.positions[0],c=o.positions[o.positions.length-1];if(r.row<n.row)return n.col===r.col&&n.row===r.row+1;if(r.row>c.row)return c.col===r.col&&c.row+1===r.row}return o.positions.some(n=>n.row===r.row&&n.col===r.col)};class X{constructor(o){Z(this,"items",[]);Z(this,"comparator");this.comparator=o}push(o){let s=this.items.length;for(this.items.push(o);s>0;){const r=Math.floor((s-1)/2);if(this.comparator(this.items[r],this.items[s])<=0)break;[this.items[r],this.items[s]]=[this.items[s],this.items[r]],s=r}}pop(){if(this.isEmpty())return;const o=this.items[0],s=this.items.pop();return this.items.length>0&&(this.items[0]=s,this.heapify(0)),o}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(o){const s=2*o+1,r=2*o+2;let n=o;s<this.items.length&&this.comparator(this.items[s],this.items[n])<0&&(n=s),r<this.items.length&&this.comparator(this.items[r],this.items[n])<0&&(n=r),n!==o&&([this.items[o],this.items[n]]=[this.items[n],this.items[o]],this.heapify(n))}}const be=(i,o,s)=>{const r=i.length*i[0].length*50,n=performance.now(),c=new Set,d=new X((t,l)=>t.f-l.f);let g=0;const u={board:i,pieces:o,stateString:R(i),cost:0,heuristic:s(i,o),f:s(i,o),moves:[]};for(d.push(u);!d.isEmpty();){g++;const t=d.pop();if(c.has(t.stateString))continue;if(c.add(t.stateString),W(t.pieces)){const a=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:a-n}}if(t.cost>r)continue;const l=q(t.board,t.pieces);for(const a of l){const{board:b,pieces:w}=M(t.board,t.pieces,a),x=R(b);if(c.has(x))continue;const m=s(b,w),f=t.cost+a.steps;if(f>r)continue;const v={board:b,pieces:w,stateString:x,cost:f,heuristic:m,f:f+m,moves:[...t.moves,a]};d.push(v)}}const h=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:h-n}},xe=(i,o)=>{const s=i.length*i[0].length*50,r=performance.now(),n=new Map,c=new X((h,t)=>h.cost-t.cost);let d=0;const g={board:i,pieces:o,stateString:R(i),cost:0,moves:[]};for(c.push(g),n.set(g.stateString,0);!c.isEmpty();){d++;const h=c.pop(),t=h.stateString;if(h.cost>(n.get(t)||1/0))continue;if(W(h.pieces)){const a=performance.now();return{solved:!0,moves:h.moves,nodesVisited:d,executionTime:a-r}}if(h.cost>s)continue;const l=q(h.board,h.pieces);for(const a of l){const{board:b,pieces:w}=M(h.board,h.pieces,a),x=R(b),m=h.cost+a.steps;if(m<(n.get(x)||1/0)){n.set(x,m);const f={board:b,pieces:w,stateString:x,cost:m,moves:[...h.moves,a]};c.push(f)}}}const u=performance.now();return{solved:!1,moves:[],nodesVisited:d,executionTime:u-r}},we=(i,o,s)=>{const r=i.length*i[0].length*50,n=performance.now(),c=new Set,d=new X((t,l)=>t.heuristic-l.heuristic);let g=0;const u={board:i,pieces:o,stateString:R(i),heuristic:s(i,o),moves:[],cost:0};for(d.push(u);!d.isEmpty();){g++;const t=d.pop();if(c.has(t.stateString))continue;if(c.add(t.stateString),W(t.pieces)){const a=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:a-n}}if(t.cost>r)continue;const l=q(t.board,t.pieces);for(const a of l){const{board:b,pieces:w}=M(t.board,t.pieces,a),x=R(b);if(c.has(x))continue;const m=s(b,w),f=t.cost+a.steps;if(f<=r){const v={board:b,pieces:w,stateString:x,heuristic:m,moves:[...t.moves,a],cost:f};d.push(v)}}}const h=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:h-n}},ve=(i,o)=>{const s=i.length*i[0].length*50,r=performance.now(),n=new Set,c=new X((t,l)=>t.cost-l.cost);let d=0;const g={board:i,pieces:o,stateString:R(i),cost:0,moves:[]};c.push(g);let u={cost:1/0,moves:[]};for(;!c.isEmpty();){d++;const t=c.pop();if(n.has(t.stateString))continue;if(n.add(t.stateString),W(t.pieces)){(!u||t.cost<u.cost)&&(u={cost:t.cost,moves:[...t.moves]});const a=performance.now();return{solved:!0,moves:t.moves,nodesVisited:d,executionTime:a-r}}if(t.cost>s)continue;const l=q(t.board,t.pieces);for(const a of l){const b=M(t.board,t.pieces,a),w=R(b.board);if(n.has(w))continue;const x={board:b.board,pieces:b.pieces,stateString:w,cost:t.cost+a.steps,moves:[...t.moves,a]};c.push(x)}}const h=performance.now();return{solved:u.cost!==1/0,moves:u.moves,nodesVisited:d,executionTime:h-r}},G={greedy:we,ucs:ve,astar:be,dijkstra:xe},ye=i=>{const o={},s=i.map(h=>h.split("")),r=new Set,n=new Set;let c=0;const d=24,g=h=>h==="."||h===" ",u=(h,t)=>{if(g(h)||g(t))return!1;const l=a=>/^[A-Za-z]$/.test(a);return l(h)&&l(t)?h===t:!1};for(let h=0;h<s.length;h++)for(let t=0;t<s[h].length;t++){const l=s[h][t],a=`${h},${t}`;if(!r.has(a)){if(g(l)){r.add(a);continue}if(l!=="K"){if(n.has(l))throw new Error(`Duplicate piece symbol '${l}' detected. Each letter can only be used once.`);if(c>=d)throw new Error(`Maximum number of pieces (${d}) exceeded.`);const b=[],w=[{row:h,col:t}],x=new Set;for(x.add(a);w.length>0;){const m=w.shift();b.push(m),r.add(`${m.row},${m.col}`);const f=[[-1,0],[1,0],[0,-1],[0,1]];for(const[v,z]of f){const T=m.row+v,k=m.col+z,L=`${T},${k}`;T>=0&&T<s.length&&k>=0&&k<s[T].length&&u(s[T][k],l)&&!x.has(L)&&(w.push({row:T,col:k}),x.add(L))}}o[l]={positions:b,symbol:l},n.add(l),c++}else l==="K"&&(o.K={positions:[{row:h,col:t}],symbol:"K",isExit:!0},r.add(a))}}return Object.values(o).forEach(h=>{if(h.isExit)return;const{positions:t}=h;if(h.size=t.length,t.length>1){const l=t.every(a=>a.row===t[0].row);if(h.orientation=l?"horizontal":"vertical",h.orientation==="horizontal"){t.sort((a,b)=>a.col-b.col);for(let a=1;a<t.length;a++)if(t[a].col!==t[a-1].col+1)throw new Error(`Piece ${h.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{t.sort((a,b)=>a.row-b.row);for(let a=1;a<t.length;a++)if(t[a].row!==t[a-1].row+1)throw new Error(`Piece ${h.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else h.orientation="unknown";h.primaryPosition=t[0],h.isPrimary=h.symbol==="P"}),o},je=i=>{const o=i.replace(/\r/g,"").trim().split(`
`);if(o.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[s,r,...n]=o,[c,d]=s.split(" ").map(Number),g=parseInt(r);if(!Number.isInteger(c)||!Number.isInteger(d)||c<=0||d<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(g)||g<0)throw new Error("Invalid number of pieces.");const u={col:-1,row:-1};for(let m=0;m<n.length;m++){const f=n[m];if(f.includes("K")){if(u.col!==-1)throw new Error("There should be only one K in the board.");u.row=m,u.col=f.indexOf("K")}}if(u.col===-1||u.row===-1)throw new Error("There should be one K in the board.");const h=u.col===0&&u.col<d,t=u.col<=c&&u.row===0,l=u.col===c&&u.row<d,a=u.col<c&&u.row===d;if(!h&&!t&&!l&&!a)throw new Error("K shouldnt be in the middle of the board.");if(n.length!==d+(t||a?1:0))throw new Error(`Expected ${d} rows in boardConfig, got ${n.length}.`);n.forEach((m,f)=>{if(console.log(h,t,l,a),h&&t){if(!m.includes("K")&&m.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(h&&a){if(!m.includes("K")&&m.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(l&&t){if(!m.includes("K")&&m.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(l&&a){if(!m.includes("K")&&m.length!==c)throw new Error(`Each row without K must have exactly ${c} columns.`)}else if(h){if(m.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(l){if(m.includes("K")){if(m.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(m.length!==c&&m.length!==c+1)throw new Error(`Each row must have ${c} or ${c+1} columns.`)}else if(t){if(f!=0&&m.length!==c)throw new Error(`Each row must have ${c} columns.`)}else if(a){if(f!=d&&m.length!==c)throw new Error(`Each row must have ${c} columns.`)}else throw new Error("Unknown K location.")});let b=-1;for(let m=0;m<n.length;m++){const f=n[m].indexOf("P");if(f!==-1){b=f;break}}if(b===-1)throw new Error("Primary piece (P) not found on the board.");if((a||t)&&n[a?d:0].indexOf("K")!==b)throw new Error("Exit (K) must be aligned with the primary piece (P).");const w=new Set;n.forEach(m=>{for(const f of m)f!=="."&&f!==" "&&f!=="K"&&f!=="P"&&w.add(f)});const x=w.size;if(x!==g)throw new Error(`Mismatch in piece count: Input specifies ${g} pieces, but ${x} unique pieces found on board.`);return{dimensions:{A:c,B:d},numPieces:g,boardConfig:n,finishLocation:{col:u.col,row:u.row}}},B={manhattan:(i,o)=>{const s=Object.values(o).find(n=>n.isPrimary),r=o.K.positions[0];if(s.orientation==="horizontal")if(r.col<s.positions[0].col){const n=s.positions[0];return Math.abs(n.row-r.row)+Math.abs(n.col-r.col-1)}else{const n=s.positions[s.positions.length-1];return Math.abs(n.row-r.row)+Math.abs(n.col+1-r.col)}else{const n=s.positions.map(c=>Math.abs(c.row-r.row)+Math.abs(c.col-r.col));return Math.min(...n)}},blockingVehicles:(i,o)=>{const s=Object.values(o).find(c=>c.isPrimary),r=o.K.positions[0];if(s.orientation==="horizontal"){const c=s.positions[0].row;if(r.col<s.positions[0].col){const d=s.positions[0].col;let g=0;for(let u=r.col+1;u<d;u++)i[c][u]!=="."&&i[c][u]!=="K"&&g++;return g}else{const d=s.positions[s.positions.length-1].col;let g=0;for(let u=d+1;u<=r.col;u++)i[c][u]!=="."&&i[c][u]!=="K"&&g++;return g}}const n=s.positions[0].col;if(r.row<s.positions[0].row){const c=s.positions[0].row;let d=0;for(let g=r.row+1;g<c;g++)i[g][n]!=="."&&i[g][n]!=="K"&&d++;return d}else{const c=s.positions[s.positions.length-1].row;let d=0;for(let g=c+1;g<=r.row;g++)i[g][n]!=="."&&i[g][n]!=="K"&&d++;return d}},combined:(i,o)=>B.manhattan(i,o)+3*B.blockingVehicles(i,o)},Ne=({isDarkMode:i,toggleDarkMode:o})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:o,className:`p-2 rounded-full ${i?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:i?"☀️":"🌙"})]}),e.jsx("p",{className:`mt-2 ${i?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],$e=K("check",Se);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],D=K("chevron-right",Ee);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Pe=K("clock",ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],Ke=K("fast-forward",Ce);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Te=K("hard-drive",ze);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Re=K("move-horizontal",Ie);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],_e=K("pause",Oe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Ae=K("play",Le);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],He=K("rewind",Me);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Fe=K("upload",Ve),Ue=({isDarkMode:i,playSpeed:o,setPlaySpeed:s,isPlaying:r,playAnimation:n,stopAnimation:c,moveOneStep:d,applyStepMove:g,currentStep:u,solution:h,saveSolution:t})=>{const l=1100-o;return e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${i?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:l,onChange:a=>{const b=parseInt(a.target.value,10);s(1100-b)},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Slow"}),e.jsx("span",{children:"Fast"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>g(-1),className:`p-2 rounded-full ${i?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(He,{size:18})}),e.jsx("button",{onClick:()=>d(!1),className:`p-2 rounded-full ${i?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:u<0,title:"Previous step",children:e.jsx(D,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:r?c:n,className:`p-3 rounded-full ${r?i?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":i?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:r?"Pause":"Play",children:r?e.jsx(_e,{size:20}):e.jsx(Ae,{size:20})}),e.jsx("button",{onClick:()=>d(!0),className:`p-2 rounded-full ${i?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:u>=((h==null?void 0:h.moves.length)||0)-1,title:"Next step",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>g(h.moves.length-1),className:`p-2 rounded-full ${i?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(Ke,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${i?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(u+1)/h.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",u===-1?"Start":u+1]}),e.jsxs("span",{children:["Total: ",h.moves.length]})]})]})]}),t&&e.jsxs("button",{onClick:t,className:`px-3 py-2 ${i?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"} text-white rounded-md text-sm font-medium w-full transition-colors shadow-sm flex items-center justify-center gap-1 mt-2`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Simpan Solusi ke File"]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),u>=0&&u<h.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]})},Ge=({stats:i,isDarkMode:o})=>e.jsxs("div",{className:`mt-6 ${o?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:i.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[i.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:i.moves})]})]})]})]}),Be=({board:i,boardConfig:o,algorithm:s,setAlgorithm:r,heuristic:n,setHeuristic:c,solvePuzzle:d,isLoading:g,error:u,setError:h,stats:t,isDarkMode:l,handleFileUpload:a})=>{var b;return e.jsxs("div",{className:`mb-8 ${l?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${l?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${l?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(Fe,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:a,onClick:()=>{u&&h(null)},className:"hidden"})]}),o&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx($e,{size:18})})]}),o&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",i.length,"x",((b=i[0])==null?void 0:b.length)||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:s,onChange:w=>r(w.target.value),className:`w-full border ${l?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:s==="greedy"?"Optimizes for quick solutions using heuristics":s==="ucs"?"Finds the shortest path by exploring all options":s==="dijkstra"?"Finds the shortest path in weighted graphs":"Combines heuristics with path cost for efficiency"})]}),s!=="ucs"&&s!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${l?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:n,onChange:w=>c(w.target.value),className:`w-full border ${l?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:n==="manhattan"?"Measures direct distance to exit":n==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsx("div",{className:"mt-6 flex items-center gap-4",children:e.jsx("button",{onClick:d,disabled:g||!o,className:`${l?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(D,{size:16,className:"ml-1"})]})})}),u&&e.jsxs("div",{className:`mt-4 ${l?"bg-red-900/30":"bg-red-50"} border ${l?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:u})]}),t&&e.jsx(Ge,{stats:t,isDarkMode:l})]})};function Je(){const[i,o]=N.useState(null),[s,r]=N.useState([]),[n,c]=N.useState({}),[d,g]=N.useState("greedy"),[u,h]=N.useState("manhattan"),[t,l]=N.useState(null),[a,b]=N.useState(-1),[w,x]=N.useState(!1),[m,f]=N.useState(null),[v,z]=N.useState([]),[T,k]=N.useState(null),[L,J]=N.useState(!1),[Q,se]=N.useState(500),P=N.useRef(null),[S,oe]=N.useState(!1);N.useEffect(()=>{l(null),k(null),b(-1),H(),s.length>0&&z(_(s))},[d,s,u]);const ne=p=>{var E;const y=(E=p.target.files)==null?void 0:E[0];if(!y)return;x(!0),f(""),l(null),k(null),b(-1),H(),r([]),c({}),z([]),o(null),g("greedy"),h("manhattan");const j=new FileReader;j.onload=A=>{var V;try{const $=(V=A.target)==null?void 0:V.result,C=je($),F=C.boardConfig.map(Y=>Y.split("")),U=ye(C.boardConfig);o(C),r(F),c(U),z(F),x(!1)}catch($){$ instanceof Error?f("Error parsing file: "+($==null?void 0:$.message)):f("An unknown error occurred"),x(!1)}},j.onerror=()=>{f("Error reading file"),x(!1)},j.readAsText(y),p.target.value=""},ie=()=>{if(!s.length||!Object.keys(n).length){f("Please upload a valid board configuration first.");return}f(""),x(!0),l(null),k(null),b(-1),H(),setTimeout(()=>{try{let p;if(d==="greedy")p=G.greedy(s,n,B[u]);else if(d==="ucs")p=G.ucs(s,n);else if(d==="astar")p=G.astar(s,n,B[u]);else if(d==="dijkstra")p=G.dijkstra(s,n);else throw new Error("Invalid algorithm");p.solved?(l(p),k({nodesVisited:p.nodesVisited,executionTime:p.executionTime.toFixed(2),moves:p.moves.length}),z(_(s))):f("No solution found"),x(!1)}catch(p){p instanceof Error?f("Error solving puzzle: "+(p==null?void 0:p.message)):f("An unknown error occurred"),x(!1)}},50)},O=N.useCallback(p=>{if(!t||p<-1||p>=t.moves.length)return;let y=_(s),j={...n};if(p===-1){z(_(s)),b(-1);return}for(let E=0;E<=p;E++){const A=M(y,j,t.moves[E]);y=A.board,j=A.pieces}z(y),b(p)},[s,n,t]),ee=()=>{s.length&&(z(_(s)),b(-1),H())},re=()=>{!t||t.moves.length===0||(a>=t.moves.length-1&&ee(),J(!0))},H=()=>{J(!1),P.current&&(clearTimeout(P.current),P.current=null)};N.useEffect(()=>{if(!L||!t)return;P.current&&clearTimeout(P.current);const p=a+1;if(p>=t.moves.length){J(!1);return}const y=t.moves[p],j=Q/(y.steps||1);return P.current=setTimeout(()=>{O(p)},j),()=>{P.current&&clearTimeout(P.current)}},[L,a,t,Q,O]);const le=p=>{t&&(p&&a<t.moves.length-1?O(a+1):!p&&a>-1&&O(a-1))};N.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]);const ce=p=>{const y=S?"bg-gray-800":"bg-gray-200";if(p==="P")return"bg-red-500 text-white shadow-md";if(p==="K")return"bg-green-500 text-white shadow-md";if(t&&a>=0&&a<t.moves.length){const j=t.moves[a];if(j&&p===j.piece)return"bg-yellow-500 text-white shadow-md"}return p!=="."?`${pe[p]||"bg-gray-500"} text-white shadow-md`:y},ae=()=>{oe(!S)},de=()=>{if(!t||!s.length)return;let p=`Papan Awal
`;const y=s.map(C=>C.join("")).join(`
`);p+=y+`


`;let j=_(s),E={...n};t.moves.forEach((C,F)=>{const U=M(j,E,C);j=U.board,E=U.pieces,p+=`Gerakan ${F+1}: ${C.piece}-${C.direction}-${C.steps} steps
`;const Y=j.map(he=>he.join("")).join(`
`);p+=Y+`


`});const A=new Blob([p],{type:"text/plain"}),V=URL.createObjectURL(A),$=document.createElement("a");$.href=V,$.download="rush_hour_solution.txt",document.body.appendChild($),$.click(),document.body.removeChild($),URL.revokeObjectURL(V)};return e.jsx(ge,{children:e.jsx("div",{className:`min-h-screen ${S?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(Ne,{isDarkMode:S,toggleDarkMode:ae}),e.jsxs("div",{className:"relative",children:[w&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${S?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(Be,{board:s,setBoard:r,boardConfig:i,setBoardConfig:o,algorithm:d,setAlgorithm:g,heuristic:u,setHeuristic:h,solvePuzzle:ie,isLoading:w,resetBoard:ee,error:m,setError:f,stats:T,isDarkMode:S,handleFileUpload:ne})]}),v.length>0&&e.jsxs("div",{className:`mb-8 ${S?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${S?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${S?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:v.map((p,y)=>e.jsx("div",{className:"flex",children:p.map((j,E)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${ce(j)} transition-all duration-300`,children:j!=="."?j:""},`cell-${y}-${E}`))},`row-${y}`))}),t&&e.jsx(Ue,{isDarkMode:S,playSpeed:Q,setPlaySpeed:se,isPlaying:L,playAnimation:re,stopAnimation:H,moveOneStep:le,applyStepMove:O,currentStep:a,solution:t,saveSolution:de})]})]}),t&&t.moves.length>0&&e.jsxs("div",{className:`${S?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${S?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>O(-1),className:`cursor-pointer p-3 rounded-lg ${a===-1?S?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":S?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),t.moves.map((p,y)=>e.jsxs("div",{onClick:()=>O(y),className:`cursor-pointer p-3 rounded-lg ${a===y?S?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":S?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",y+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",p.piece]})]}),e.jsxs("div",{className:`text-sm ${S?"text-gray-300":"text-gray-600"}`,children:["Direction: ",p.direction," ",p.steps>1?`(${p.steps} steps)`:""]})]},y))]})]})]})})})}export{Je as default};

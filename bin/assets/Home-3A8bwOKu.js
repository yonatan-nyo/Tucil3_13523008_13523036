var he=Object.defineProperty;var me=(c,i,s)=>i in c?he(c,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):c[i]=s;var Z=(c,i,s)=>me(c,typeof i!="symbol"?i+"":i,s);import{j as e,r as v}from"./index-BCfBLlQx.js";import{c as C,L as ue}from"./Layout-CbGJgzol.js";const E={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},ge={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},_=c=>c.map(i=>[...i]),fe=c=>{const i=c.replace(/\r/g,"").trim().split(`
`);if(i.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[s,r,...o]=i,[l,m]=s.split(" ").map(Number),g=parseInt(r);if(!Number.isInteger(l)||!Number.isInteger(m)||l<=0||m<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(g)||g<0)throw new Error("Invalid number of pieces.");const h={col:-1,row:-1};for(let u=0;u<o.length;u++){const b=o[u];if(b.includes("K")){if(h.col!==-1)throw new Error("There should be only one K in the board.");h.row=u,h.col=b.indexOf("K")}}if(h.col===-1||h.row===-1)throw new Error("There should be one K in the board.");const d=h.col===0&&h.col<m,t=h.col<=l&&h.row===0,a=h.col===l&&h.row<m,n=h.col<l&&h.row===m;if(!d&&!t&&!a&&!n)throw new Error("K shouldnt be in the middle of the board.");if(o.length!==m+(t||n?1:0))throw new Error(`Expected ${m} rows in boardConfig, got ${o.length}.`);o.forEach((u,b)=>{if(console.log(d,t,a,n),d&&t){if(!u.includes("K")&&u.length!==l)throw new Error(`Each row without K must have exactly ${l} columns.`)}else if(d&&n){if(!u.includes("K")&&u.length!==l)throw new Error(`Each row without K must have exactly ${l} columns.`)}else if(a&&t){if(!u.includes("K")&&u.length!==l)throw new Error(`Each row without K must have exactly ${l} columns.`)}else if(a&&n){if(!u.includes("K")&&u.length!==l)throw new Error(`Each row without K must have exactly ${l} columns.`)}else if(a&&n){if(!u.includes("K")&&u.length!==l)throw new Error(`Each row without K must have exactly ${l} columns.`)}else if(d){if(u.length!==l+1)throw new Error(`Each row must have ${l+1} columns.`)}else if(a){if(u.includes("K")){if(u.length!==l+1)throw new Error(`Each row must have ${l+1} columns.`)}else if(u.length!==l&&u.length!==l+1)throw new Error(`Each row must have ${l} or ${l+1} columns.`)}else if(t){if(b!=0&&u.length!==l)throw new Error(`Each row must have ${l} columns.`)}else if(n){if(b!=m&&u.length!==l)throw new Error(`Each row must have ${l} columns.`)}else throw new Error("Unknown K location.")});let f=-1;for(let u=0;u<o.length;u++){const b=o[u].indexOf("P");if(b!==-1){f=b;break}}if(f===-1)throw new Error("Primary piece (P) not found on the board.");if((n||t)&&o[n?m:0].indexOf("K")!==f)throw new Error("Exit (K) must be aligned with the primary piece (P).");const x=new Set;o.forEach(u=>{for(const b of u)b!=="."&&b!==" "&&b!=="K"&&b!=="P"&&x.add(b)});const w=x.size;if(w!==g)throw new Error(`Mismatch in piece count: Input specifies ${g} pieces, but ${w} unique pieces found on board.`);return{dimensions:{A:l,B:m},numPieces:g,boardConfig:o,finishLocation:{col:h.col,row:h.row}}},pe=c=>{const i={},s=c.map(d=>d.split("")),r=new Set,o=new Set;let l=0;const m=24,g=d=>d==="."||d===" ",h=(d,t)=>{if(g(d)||g(t))return!1;const a=n=>/^[A-Za-z]$/.test(n);return a(d)&&a(t)?d===t:!1};for(let d=0;d<s.length;d++)for(let t=0;t<s[d].length;t++){const a=s[d][t],n=`${d},${t}`;if(!r.has(n)){if(g(a)){r.add(n);continue}if(a!=="K"){if(o.has(a))throw new Error(`Duplicate piece symbol '${a}' detected. Each letter can only be used once.`);if(l>=m)throw new Error(`Maximum number of pieces (${m}) exceeded.`);const f=[],x=[{row:d,col:t}],w=new Set;for(w.add(n);x.length>0;){const u=x.shift();f.push(u),r.add(`${u.row},${u.col}`);const b=[[-1,0],[1,0],[0,-1],[0,1]];for(const[K,T]of b){const I=u.row+K,P=u.col+T,L=`${I},${P}`;I>=0&&I<s.length&&P>=0&&P<s[I].length&&h(s[I][P],a)&&!w.has(L)&&(x.push({row:I,col:P}),w.add(L))}}i[a]={positions:f,symbol:a},o.add(a),l++}else a==="K"&&(i.K={positions:[{row:d,col:t}],symbol:"K",isExit:!0},r.add(n))}}return Object.values(i).forEach(d=>{if(d.isExit)return;const{positions:t}=d;if(d.size=t.length,t.length>1){const a=t.every(n=>n.row===t[0].row);if(d.orientation=a?"horizontal":"vertical",d.orientation==="horizontal"){t.sort((n,f)=>n.col-f.col);for(let n=1;n<t.length;n++)if(t[n].col!==t[n-1].col+1)throw new Error(`Piece ${d.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{t.sort((n,f)=>n.row-f.row);for(let n=1;n<t.length;n++)if(t[n].row!==t[n-1].row+1)throw new Error(`Piece ${d.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else d.orientation="unknown";d.primaryPosition=t[0],d.isPrimary=d.symbol==="P"}),i},R=c=>c.map(i=>i.join("")).join(""),q=(c,i)=>{const s=[],r=c.length,o=c[0].length,l=i.K,m=l==null?void 0:l.positions[0],g=(m==null?void 0:m.col)===0&&m.row<r,h=(m==null?void 0:m.row)===0&&m.col<o,d=(m==null?void 0:m.col)===o-1&&m.row<r,t=(m==null?void 0:m.row)===r-1&&m.col<o;return Object.values(i).forEach(a=>{if(a.isExit)return;const{orientation:n,symbol:f}=a;if(n){if(n==="horizontal"){const x=a.positions[0];if(x.col>0&&!(g&&x.col===1&&!a.isPrimary)){const b=c[x.row][x.col-1];b==="."?s.push({piece:f,direction:E.LEFT}):b==="K"&&a.isPrimary&&s.push({piece:f,direction:E.LEFT})}const w=a.positions[a.positions.length-1],u=w.col+1;if(u<o&&!(d&&u===o-1&&!a.isPrimary)){const b=c[w.row][u];b==="."?s.push({piece:f,direction:E.RIGHT}):b==="K"&&a.isPrimary&&s.push({piece:f,direction:E.RIGHT})}}else if(n==="vertical"){const x=a.positions[0];if(x.row>0&&!(h&&x.row===1&&!a.isPrimary)){const u=c[x.row-1][x.col];u==="."?s.push({piece:f,direction:E.UP}):u==="K"&&a.isPrimary&&s.push({piece:f,direction:E.UP})}const w=a.positions[a.positions.length-1];if(w.row+1<r&&!(t&&w.row===r-2&&!a.isPrimary)){const u=c[w.row+1][w.col];u==="."?s.push({piece:f,direction:E.DOWN}):u==="K"&&a.isPrimary&&s.push({piece:f,direction:E.DOWN})}}}}),s},H=(c,i,s)=>{const r=_(c),{piece:o,direction:l}=s,m=i[o];if(!m.orientation)return{board:r,pieces:{...i}};const{orientation:g,positions:h}=m,d=[...h];if(g==="horizontal"){if(l===E.LEFT){const a=h[h.length-1];r[a.row][a.col]=".";const n={row:h[0].row,col:h[0].col-1};r[n.row][n.col]=o,d.pop(),d.unshift(n)}else if(l===E.RIGHT){const a=h[0];r[a.row][a.col]=".";const n={row:h[h.length-1].row,col:h[h.length-1].col+1};r[n.row][n.col]==="K"||(r[n.row][n.col]=o),d.shift(),d.push(n)}}else if(g==="vertical"){if(l===E.UP){const a=h[h.length-1];r[a.row][a.col]=".";const n={row:h[0].row-1,col:h[0].col};r[n.row][n.col]=o,d.pop(),d.unshift(n)}else if(l===E.DOWN){const a=h[0];r[a.row][a.col]=".";const n={row:h[h.length-1].row+1,col:h[h.length-1].col};r[n.row][n.col]=o,d.shift(),d.push(n)}}const t={...i};return t[o]={...m,positions:d,primaryPosition:d[0]},{board:r,pieces:t}},W=c=>{const i=Object.values(c).find(o=>o.isPrimary);if(!i)return!1;const s=c.K;if(!s)return!1;const r=s.positions[0];if(i.orientation==="horizontal"){const o=i.positions[0];if(r.col<o.col)return o.row===r.row&&o.col===r.col+1;if(r.col>i.positions[i.positions.length-1].col){const l=i.positions[i.positions.length-1];return l.row===r.row&&l.col+1===r.col}}else if(i.orientation==="vertical"){const o=i.positions[0],l=i.positions[i.positions.length-1];if(r.row<o.row)return o.col===r.col&&o.row===r.row+1;if(r.row>l.row)return l.col===r.col&&l.row+1===r.row}return i.positions.some(o=>o.row===r.row&&o.col===r.col)};class X{constructor(i){Z(this,"items",[]);Z(this,"comparator");this.comparator=i}push(i){let s=this.items.length;for(this.items.push(i);s>0;){const r=Math.floor((s-1)/2);if(this.comparator(this.items[r],this.items[s])<=0)break;[this.items[r],this.items[s]]=[this.items[s],this.items[r]],s=r}}pop(){if(this.isEmpty())return;const i=this.items[0],s=this.items.pop();return this.items.length>0&&(this.items[0]=s,this.heapify(0)),i}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(i){const s=2*i+1,r=2*i+2;let o=i;s<this.items.length&&this.comparator(this.items[s],this.items[o])<0&&(o=s),r<this.items.length&&this.comparator(this.items[r],this.items[o])<0&&(o=r),o!==i&&([this.items[i],this.items[o]]=[this.items[o],this.items[i]],this.heapify(o))}}const be=(c,i,s)=>{const r=c.length*c[0].length*35,o=performance.now(),l=new Set,m=new X((t,a)=>t.f-a.f);let g=0;const h={board:c,pieces:i,stateString:R(c),cost:0,heuristic:s(c,i),f:s(c,i),moves:[]};for(m.push(h);!m.isEmpty();){g++;const t=m.pop();if(l.has(t.stateString))continue;if(l.add(t.stateString),W(t.pieces)){const n=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:n-o}}if(t.cost>r)continue;const a=q(t.board,t.pieces);for(const n of a){const{board:f,pieces:x}=H(t.board,t.pieces,n),w=R(f);if(l.has(w))continue;const u=s(f,x),b=t.cost+1;if(b>r)continue;const K={board:f,pieces:x,stateString:w,cost:b,heuristic:u,f:b+u,moves:[...t.moves,n]};m.push(K)}}const d=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:d-o}},xe=(c,i)=>{const s=c.length*c[0].length*35,r=performance.now(),o=new Map,l=new X((d,t)=>d.cost-t.cost);let m=0;const g={board:c,pieces:i,stateString:R(c),cost:0,moves:[]};for(l.push(g),o.set(g.stateString,0);!l.isEmpty();){m++;const d=l.pop(),t=d.stateString;if(d.cost>(o.get(t)||1/0))continue;if(W(d.pieces)){const n=performance.now();return{solved:!0,moves:d.moves,nodesVisited:m,executionTime:n-r}}if(d.cost>s)continue;const a=q(d.board,d.pieces);for(const n of a){const{board:f,pieces:x}=H(d.board,d.pieces,n),w=R(f),u=d.cost+1;if(u<(o.get(w)||1/0)){o.set(w,u);const b={board:f,pieces:x,stateString:w,cost:u,moves:[...d.moves,n]};l.push(b)}}}const h=performance.now();return{solved:!1,moves:[],nodesVisited:m,executionTime:h-r}},we=(c,i,s)=>{const r=c.length*c[0].length*35,o=performance.now(),l=new Set,m=new X((t,a)=>t.heuristic-a.heuristic);let g=0;const h={board:c,pieces:i,stateString:R(c),heuristic:s(c,i),moves:[],cost:0};for(m.push(h);!m.isEmpty();){g++;const t=m.pop();if(l.has(t.stateString))continue;if(l.add(t.stateString),W(t.pieces)){const n=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:n-o}}if(t.cost>r)continue;const a=q(t.board,t.pieces);for(const n of a){const{board:f,pieces:x}=H(t.board,t.pieces,n),w=R(f);if(l.has(w))continue;const u=s(f,x),b=t.cost+1;if(b<=r){const K={board:f,pieces:x,stateString:w,heuristic:u,moves:[...t.moves,n],cost:b};m.push(K)}}}const d=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:d-o}},ve=(c,i)=>{const s=c.length*c[0].length*35,r=performance.now(),o=new Set,l=new X((t,a)=>t.cost-a.cost);let m=0;const g={board:c,pieces:i,stateString:R(c),cost:0,moves:[]};l.push(g);let h={cost:1/0,moves:[]};for(;!l.isEmpty();){m++;const t=l.pop();if(o.has(t.stateString))continue;if(o.add(t.stateString),W(t.pieces)){(!h||t.cost<h.cost)&&(h={cost:t.cost,moves:[...t.moves]});const n=performance.now();return{solved:!0,moves:t.moves,nodesVisited:m,executionTime:n-r}}if(t.cost>s)continue;const a=q(t.board,t.pieces);for(const n of a){const f=H(t.board,t.pieces,n),x=R(f.board);if(o.has(x))continue;const w={board:f.board,pieces:f.pieces,stateString:x,cost:t.cost+1,moves:[...t.moves,n]};l.push(w)}}const d=performance.now();return{solved:h.cost!==1/0,moves:h.moves,nodesVisited:m,executionTime:d-r}},U={greedy:we,ucs:ve,astar:be,dijkstra:xe},B={manhattan:(c,i)=>{const s=Object.values(i).find(o=>o.isPrimary),r=i.K.positions[0];if(s.orientation==="horizontal")if(r.col<s.positions[0].col){const o=s.positions[0];return Math.abs(o.row-r.row)+Math.abs(o.col-r.col-1)}else{const o=s.positions[s.positions.length-1];return Math.abs(o.row-r.row)+Math.abs(o.col+1-r.col)}else{const o=s.positions.map(l=>Math.abs(l.row-r.row)+Math.abs(l.col-r.col));return Math.min(...o)}},blockingVehicles:(c,i)=>{const s=Object.values(i).find(l=>l.isPrimary),r=i.K.positions[0];if(s.orientation==="horizontal"){const l=s.positions[0].row;if(r.col<s.positions[0].col){const m=s.positions[0].col;let g=0;for(let h=r.col+1;h<m;h++)c[l][h]!=="."&&c[l][h]!=="K"&&g++;return g}else{const m=s.positions[s.positions.length-1].col;let g=0;for(let h=m+1;h<=r.col;h++)c[l][h]!=="."&&c[l][h]!=="K"&&g++;return g}}const o=s.positions[0].col;if(r.row<s.positions[0].row){const l=s.positions[0].row;let m=0;for(let g=r.row+1;g<l;g++)c[g][o]!=="."&&c[g][o]!=="K"&&m++;return m}else{const l=s.positions[s.positions.length-1].row;let m=0;for(let g=l+1;g<=r.row;g++)c[g][o]!=="."&&c[g][o]!=="K"&&m++;return m}},combined:(c,i)=>B.manhattan(c,i)+3*B.blockingVehicles(c,i)},ye=({isDarkMode:c,toggleDarkMode:i})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:i,className:`p-2 rounded-full ${c?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:c?"☀️":"🌙"})]}),e.jsx("p",{className:`mt-2 ${c?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ne=C("check",je);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],D=C("chevron-right",Se);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$e=C("clock",Ee);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],ke=C("fast-forward",Pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Ke=C("hard-drive",Ce);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],ze=C("move-horizontal",Te);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Re=C("pause",Ie);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],_e=C("play",Oe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],Ae=C("rewind",Le);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ve=C("upload",He),Fe=({isDarkMode:c,playSpeed:i,setPlaySpeed:s,isPlaying:r,playAnimation:o,stopAnimation:l,moveOneStep:m,applyStepMove:g,currentStep:h,solution:d,saveSolution:t})=>{const a=1100-i;return e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${c?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:a,onChange:n=>{const f=parseInt(n.target.value,10);s(1100-f)},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Slow"}),e.jsx("span",{children:"Fast"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>g(-1),className:`p-2 rounded-full ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(Ae,{size:18})}),e.jsx("button",{onClick:()=>m(!1),className:`p-2 rounded-full ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:h<0,title:"Previous step",children:e.jsx(D,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:r?l:o,className:`p-3 rounded-full ${r?c?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":c?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:r?"Pause":"Play",children:r?e.jsx(Re,{size:20}):e.jsx(_e,{size:20})}),e.jsx("button",{onClick:()=>m(!0),className:`p-2 rounded-full ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:h>=((d==null?void 0:d.moves.length)||0)-1,title:"Next step",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>g(d.moves.length-1),className:`p-2 rounded-full ${c?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(ke,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${c?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(h+1)/d.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",h===-1?"Start":h+1]}),e.jsxs("span",{children:["Total: ",d.moves.length]})]})]})]}),t&&e.jsxs("button",{onClick:t,className:`px-3 py-2 ${c?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"} text-white rounded-md text-sm font-medium w-full transition-colors shadow-sm flex items-center justify-center gap-1 mt-2`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Simpan Solusi ke File"]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),h>=0&&h<d.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]})},Me=({stats:c,isDarkMode:i})=>e.jsxs("div",{className:`mt-6 ${i?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:`${i?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:c.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:`${i?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[c.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ze,{className:`${i?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:c.moves})]})]})]})]}),Ge=({board:c,boardConfig:i,algorithm:s,setAlgorithm:r,heuristic:o,setHeuristic:l,solvePuzzle:m,isLoading:g,error:h,setError:d,stats:t,isDarkMode:a,handleFileUpload:n})=>{var f;return e.jsxs("div",{className:`mb-8 ${a?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${a?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${a?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(Ve,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:n,onClick:()=>{h&&d(null)},className:"hidden"})]}),i&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx(Ne,{size:18})})]}),i&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",c.length,"x",((f=c[0])==null?void 0:f.length)||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:s,onChange:x=>r(x.target.value),className:`w-full border ${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:s==="greedy"?"Optimizes for quick solutions using heuristics":s==="ucs"?"Finds the shortest path by exploring all options":s==="dijkstra"?"Finds the shortest path in weighted graphs":"Combines heuristics with path cost for efficiency"})]}),s!=="ucs"&&s!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${a?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:`w-full border ${a?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:o==="manhattan"?"Measures direct distance to exit":o==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsx("div",{className:"mt-6 flex items-center gap-4",children:e.jsx("button",{onClick:m,disabled:g||!i,className:`${a?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(D,{size:16,className:"ml-1"})]})})}),h&&e.jsxs("div",{className:`mt-4 ${a?"bg-red-900/30":"bg-red-50"} border ${a?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:h})]}),t&&e.jsx(Me,{stats:t,isDarkMode:a})]})};function We(){const[c,i]=v.useState(null),[s,r]=v.useState([]),[o,l]=v.useState({}),[m,g]=v.useState("greedy"),[h,d]=v.useState("manhattan"),[t,a]=v.useState(null),[n,f]=v.useState(-1),[x,w]=v.useState(!1),[u,b]=v.useState(null),[K,T]=v.useState([]),[I,P]=v.useState(null),[L,J]=v.useState(!1),[Q,te]=v.useState(500),k=v.useRef(null),[j,se]=v.useState(!1);v.useEffect(()=>{a(null),P(null),f(-1),V(),s.length>0&&T(_(s))},[m,s,h]);const oe=p=>{var $;const y=($=p.target.files)==null?void 0:$[0];if(!y)return;w(!0),b(null),a(null),P(null),f(-1),V(),r([]),l({}),T([]),i(null),g("greedy"),d("manhattan");const N=new FileReader;N.onload=A=>{var F;try{const S=(F=A.target)==null?void 0:F.result,z=fe(S),M=z.boardConfig.map(Y=>Y.split("")),G=pe(z.boardConfig);i(z),r(M),l(G),T(M),w(!1)}catch(S){S instanceof Error?b("Error parsing file: "+(S==null?void 0:S.message)):b("An unknown error occurred"),w(!1)}},N.onerror=()=>{b("Error reading file"),w(!1)},N.readAsText(y),p.target.value=""},ne=()=>{if(!s.length||!Object.keys(o).length){b("Please upload a valid board configuration first.");return}w(!0),a(null),P(null),f(-1),V(),setTimeout(()=>{try{let p;if(m==="greedy")p=U.greedy(s,o,B[h]);else if(m==="ucs")p=U.ucs(s,o);else if(m==="astar")p=U.astar(s,o,B[h]);else if(m==="dijkstra")p=U.dijkstra(s,o);else throw new Error("Invalid algorithm");p.solved?(a(p),P({nodesVisited:p.nodesVisited,executionTime:p.executionTime.toFixed(2),moves:p.moves.length}),T(_(s))):b("No solution found"),w(!1)}catch(p){p instanceof Error?b("Error solving puzzle: "+(p==null?void 0:p.message)):b("An unknown error occurred"),w(!1)}},50)},O=v.useCallback(p=>{if(!t||p<-1||p>=t.moves.length)return;let y=_(s),N={...o};if(p===-1){T(_(s)),f(-1);return}for(let $=0;$<=p;$++){const A=H(y,N,t.moves[$]);y=A.board,N=A.pieces}T(y),f(p)},[s,o,t]),ee=()=>{s.length&&(T(_(s)),f(-1),V())},ie=()=>{!t||t.moves.length===0||(n>=t.moves.length-1&&ee(),J(!0))},V=()=>{J(!1),k.current&&(clearTimeout(k.current),k.current=null)};v.useEffect(()=>{if(!L||!t)return;k.current&&clearTimeout(k.current);const p=n+1;if(p>=t.moves.length){J(!1);return}return k.current=setTimeout(()=>{O(p)},Q),()=>{k.current&&clearTimeout(k.current)}},[L,n,t,Q,O]);const re=p=>{t&&(p&&n<t.moves.length-1?O(n+1):!p&&n>-1&&O(n-1))};v.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const le=p=>{const y=j?"bg-gray-800":"bg-gray-200";if(p==="P")return"bg-red-500 text-white shadow-md";if(p==="K")return"bg-green-500 text-white shadow-md";if(t&&n>=0&&n<t.moves.length){const N=t.moves[n];if(N&&p===N.piece)return"bg-yellow-500 text-white shadow-md"}return p!=="."?`${ge[p]||"bg-gray-500"} text-white shadow-md`:y},ce=()=>{se(!j)},ae=()=>{if(!t||!s.length)return;let p=`Papan Awal
`;const y=s.map(z=>z.join("")).join(`
`);p+=y+`


`;let N=_(s),$={...o};t.moves.forEach((z,M)=>{const G=H(N,$,z);N=G.board,$=G.pieces,p+=`Gerakan ${M+1}: ${z.piece}-${z.direction}
`;const Y=N.map(de=>de.join("")).join(`
`);p+=Y+`


`});const A=new Blob([p],{type:"text/plain"}),F=URL.createObjectURL(A),S=document.createElement("a");S.href=F,S.download="rush_hour_solution.txt",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(F)};return e.jsx(ue,{children:e.jsx("div",{className:`min-h-screen ${j?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(ye,{isDarkMode:j,toggleDarkMode:ce}),e.jsxs("div",{className:"relative",children:[x&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(Ge,{board:s,setBoard:r,boardConfig:c,setBoardConfig:i,algorithm:m,setAlgorithm:g,heuristic:h,setHeuristic:d,solvePuzzle:ne,isLoading:x,resetBoard:ee,error:u,setError:b,stats:I,isDarkMode:j,handleFileUpload:oe})]}),K.length>0&&e.jsxs("div",{className:`mb-8 ${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${j?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:K.map((p,y)=>e.jsx("div",{className:"flex",children:p.map((N,$)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${le(N)} transition-all duration-300`,children:N!=="."?N:""},`cell-${y}-${$}`))},`row-${y}`))}),t&&e.jsx(Fe,{isDarkMode:j,playSpeed:Q,setPlaySpeed:te,isPlaying:L,playAnimation:ie,stopAnimation:V,moveOneStep:re,applyStepMove:O,currentStep:n,solution:t,saveSolution:ae})]})]}),t&&t.moves.length>0&&e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>O(-1),className:`cursor-pointer p-3 rounded-lg ${n===-1?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),t.moves.map((p,y)=>e.jsxs("div",{onClick:()=>O(y),className:`cursor-pointer p-3 rounded-lg ${n===y?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",y+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",p.piece]})]}),e.jsxs("div",{className:`text-sm ${j?"text-gray-300":"text-gray-600"}`,children:["Direction: ",p.direction]})]},y))]})]})]})})})}export{We as default};

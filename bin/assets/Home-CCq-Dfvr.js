var me=Object.defineProperty;var he=(n,t,s)=>t in n?me(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var X=(n,t,s)=>he(n,typeof t!="symbol"?t+"":t,s);import{j as e,r as w}from"./index-RkDGBiQZ.js";const C={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},ue={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},I=n=>n.map(t=>[...t]),ge=n=>{const t=n.replace(/\r/g,"").trim().split(`
`);if(t.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[s,i,...l]=t,[c,a]=s.split(" ").map(Number),d=parseInt(i);if(!Number.isInteger(c)||!Number.isInteger(a)||c<=0||a<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(d)||d<0)throw new Error("Invalid number of pieces.");const r={col:-1,row:-1};for(let g=0;g<l.length;g++){const f=l[g];if(f.includes("K")){if(r.col!==-1)throw new Error("There should be only one K in the board.");r.row=g,r.col=f.indexOf("K")}}if(r.col===-1||r.row===-1)throw new Error("There should be one K in the board.");const u=r.col===0&&r.col<a,o=r.col<=c&&r.row===0,m=r.col===c&&r.row<a,h=r.col<c&&r.row===a;if(!u&&!o&&!m&&!h)throw new Error("K shouldnt be in the middle of the board.");if(l.length!==a+(o||h?1:0))throw new Error(`Expected ${a} rows in boardConfig, got ${l.length}.`);return l.forEach((g,f)=>{if(u){if(g.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(m){if(g.includes("K")){if(g.length!==c+1)throw new Error(`Each row must have ${c+1} columns.`)}else if(g.length!==c&&g.length!==c+1)throw new Error(`Each row must have ${c} or ${c+1} columns.`)}else if(o){if(f!=0&&g.length!==c)throw new Error(`Each row must have ${c} columns.`)}else if(h){if(f!=a&&g.length!==c)throw new Error(`Each row must have ${c} columns.`)}else throw new Error("Unknown K location.")}),{dimensions:{A:c,B:a},numPieces:d,boardConfig:l,finishLocation:{col:r.col,row:r.row}}},fe=n=>{const t={},s=n.map(d=>d.split("")),i=new Set,l=new Set;let c=0;const a=24;for(let d=0;d<s.length;d++)for(let r=0;r<s[d].length;r++){const u=s[d][r],o=`${d},${r}`;if(!i.has(o))if(u!=="."&&u!=="K"){if(l.has(u))throw new Error(`Duplicate piece symbol '${u}' detected. Each letter can only be used once.`);if(c>=a)throw new Error(`Maximum number of pieces (${a}) exceeded.`);const m=[],h=[{row:d,col:r}],g=new Set;for(g.add(o);h.length>0;){const f=h.shift();m.push(f),i.add(`${f.row},${f.col}`);const b=[[-1,0],[1,0],[0,-1],[0,1]];for(const[v,x]of b){const N=f.row+v,S=f.col+x,A=`${N},${S}`;N>=0&&N<s.length&&S>=0&&S<s[N].length&&s[N][S]===u&&!g.has(A)&&(h.push({row:N,col:S}),g.add(A))}}t[u]={positions:m,symbol:u},l.add(u),c++}else u==="K"&&(t.K={positions:[{row:d,col:r}],symbol:"K",isExit:!0},i.add(o))}return Object.values(t).forEach(d=>{if(d.isExit)return;const{positions:r}=d;if(d.size=r.length,r.length>1){const u=r.every(o=>o.row===r[0].row);if(d.orientation=u?"horizontal":"vertical",d.orientation==="horizontal"){r.sort((o,m)=>o.col-m.col);for(let o=1;o<r.length;o++)if(r[o].col!==r[o-1].col+1)throw new Error(`Piece ${d.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{r.sort((o,m)=>o.row-m.row);for(let o=1;o<r.length;o++)if(r[o].row!==r[o-1].row+1)throw new Error(`Piece ${d.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else d.orientation="unknown";d.primaryPosition=r[0],d.isPrimary=d.symbol==="P"}),t},T=n=>n.map(t=>t.join("")).join(""),V=(n,t)=>{const s=[],i=n.length,l=n[0].length,c=t.K,a=c==null?void 0:c.positions[0],d=(a==null?void 0:a.col)===0&&a.row<i,r=(a==null?void 0:a.row)===0&&a.col<l,u=(a==null?void 0:a.col)===l-1&&a.row<i,o=(a==null?void 0:a.row)===i-1&&a.col<l;return Object.values(t).forEach(m=>{if(m.isExit)return;const{orientation:h,symbol:g}=m;if(h){if(h==="horizontal"){const f=m.positions[0];if(f.col>0&&!(d&&f.col===1&&!m.isPrimary)){const x=n[f.row][f.col-1];x==="."?s.push({piece:g,direction:C.LEFT}):x==="K"&&m.isPrimary&&s.push({piece:g,direction:C.LEFT})}const b=m.positions[m.positions.length-1],v=b.col+1;if(v<l&&!(u&&v===l-1&&!m.isPrimary)){const x=n[b.row][v];x==="."?s.push({piece:g,direction:C.RIGHT}):x==="K"&&m.isPrimary&&s.push({piece:g,direction:C.RIGHT})}}else if(h==="vertical"){const f=m.positions[0];if(f.row>0&&!(r&&f.row===1&&!m.isPrimary)){const v=n[f.row-1][f.col];v==="."?s.push({piece:g,direction:C.UP}):v==="K"&&m.isPrimary&&s.push({piece:g,direction:C.UP})}const b=m.positions[m.positions.length-1];if(b.row+1<i&&!(o&&b.row===i-2&&!m.isPrimary)){const v=n[b.row+1][b.col];v==="."?s.push({piece:g,direction:C.DOWN}):v==="K"&&m.isPrimary&&s.push({piece:g,direction:C.DOWN})}}}}),s},_=(n,t,s)=>{const i=I(n),{piece:l,direction:c}=s,a=t[l];if(!a.orientation)return{board:i,pieces:{...t}};const{orientation:d,positions:r}=a,u=[...r];if(d==="horizontal"){if(c===C.LEFT){const m=r[r.length-1];i[m.row][m.col]=".";const h={row:r[0].row,col:r[0].col-1};i[h.row][h.col]=l,u.pop(),u.unshift(h)}else if(c===C.RIGHT){const m=r[0];i[m.row][m.col]=".";const h={row:r[r.length-1].row,col:r[r.length-1].col+1};i[h.row][h.col]==="K"||(i[h.row][h.col]=l),u.shift(),u.push(h)}}else if(d==="vertical"){if(c===C.UP){const m=r[r.length-1];i[m.row][m.col]=".";const h={row:r[0].row-1,col:r[0].col};i[h.row][h.col]=l,u.pop(),u.unshift(h)}else if(c===C.DOWN){const m=r[0];i[m.row][m.col]=".";const h={row:r[r.length-1].row+1,col:r[r.length-1].col};i[h.row][h.col]=l,u.shift(),u.push(h)}}const o={...t};return o[l]={...a,positions:u,primaryPosition:u[0]},{board:i,pieces:o}},F=n=>{const t=Object.values(n).find(l=>l.isPrimary);if(!t)return!1;const s=n.K;if(!s)return!1;const i=s.positions[0];if(t.orientation==="horizontal"){const l=t.positions[0];if(i.col<l.col)return l.row===i.row&&l.col===i.col+1;if(i.col>t.positions[t.positions.length-1].col){const c=t.positions[t.positions.length-1];return c.row===i.row&&c.col+1===i.col}}else if(t.orientation==="vertical"){const l=t.positions[0],c=t.positions[t.positions.length-1];if(i.row<l.row)return l.col===i.col&&l.row===i.row+1;if(i.row>c.row)return c.col===i.col&&c.row+1===i.row}return t.positions.some(l=>l.row===i.row&&l.col===i.col)};class G{constructor(t){X(this,"items",[]);X(this,"comparator");this.comparator=t}push(t){let s=this.items.length;for(this.items.push(t);s>0;){const i=Math.floor((s-1)/2);if(this.comparator(this.items[i],this.items[s])<=0)break;[this.items[i],this.items[s]]=[this.items[s],this.items[i]],s=i}}pop(){if(this.isEmpty())return;const t=this.items[0],s=this.items.pop();return this.items.length>0&&(this.items[0]=s,this.heapify(0)),t}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(t){const s=2*t+1,i=2*t+2;let l=t;s<this.items.length&&this.comparator(this.items[s],this.items[l])<0&&(l=s),i<this.items.length&&this.comparator(this.items[i],this.items[l])<0&&(l=i),l!==t&&([this.items[t],this.items[l]]=[this.items[l],this.items[t]],this.heapify(l))}}const pe=(n,t,s)=>{const i=n.length*n[0].length*5,l=performance.now(),c=new Set,a=new G((o,m)=>o.f-m.f);let d=0;const r={board:n,pieces:t,stateString:T(n),cost:0,heuristic:s(n,t),f:s(n,t),moves:[]};for(a.push(r);!a.isEmpty();){d++;const o=a.pop();if(c.has(o.stateString))continue;if(c.add(o.stateString),F(o.pieces)){const h=performance.now();return{solved:!0,moves:o.moves,nodesVisited:d,executionTime:h-l}}if(o.cost>i)continue;const m=V(o.board,o.pieces);for(const h of m){const{board:g,pieces:f}=_(o.board,o.pieces,h),b=T(g);if(c.has(b))continue;const v=s(g,f),x=o.cost+1;if(x>i)continue;const N={board:g,pieces:f,stateString:b,cost:x,heuristic:v,f:x+v,moves:[...o.moves,h]};a.push(N)}}const u=performance.now();return{solved:!1,moves:[],nodesVisited:d,executionTime:u-l}},be=(n,t)=>{const s=n.length*n[0].length*5,i=performance.now(),l=new Map,c=new G((u,o)=>u.cost-o.cost);let a=0;const d={board:n,pieces:t,stateString:T(n),cost:0,moves:[]};for(c.push(d),l.set(d.stateString,0);!c.isEmpty();){a++;const u=c.pop(),o=u.stateString;if(u.cost>(l.get(o)||1/0))continue;if(F(u.pieces)){const h=performance.now();return{solved:!0,moves:u.moves,nodesVisited:a,executionTime:h-i}}if(u.cost>s)continue;const m=V(u.board,u.pieces);for(const h of m){const{board:g,pieces:f}=_(u.board,u.pieces,h),b=T(g),v=u.cost+1;if(v<(l.get(b)||1/0)){l.set(b,v);const x={board:g,pieces:f,stateString:b,cost:v,moves:[...u.moves,h]};c.push(x)}}}const r=performance.now();return{solved:!1,moves:[],nodesVisited:a,executionTime:r-i}},xe=(n,t,s)=>{const i=n.length*n[0].length*5,l=performance.now(),c=new Set,a=new G((o,m)=>o.heuristic-m.heuristic);let d=0;const r={board:n,pieces:t,stateString:T(n),heuristic:s(n,t),moves:[],cost:0};for(a.push(r);!a.isEmpty();){d++;const o=a.pop();if(c.has(o.stateString))continue;if(c.add(o.stateString),F(o.pieces)){const h=performance.now();return{solved:!0,moves:o.moves,nodesVisited:d,executionTime:h-l}}if(o.cost>i)continue;const m=V(o.board,o.pieces);for(const h of m){const{board:g,pieces:f}=_(o.board,o.pieces,h),b=T(g);if(c.has(b))continue;const v=s(g,f),x=o.cost+1;if(x<=i){const N={board:g,pieces:f,stateString:b,heuristic:v,moves:[...o.moves,h],cost:x};a.push(N)}}}const u=performance.now();return{solved:!1,moves:[],nodesVisited:d,executionTime:u-l}},we=(n,t)=>{const s=n.length*n[0].length*5,i=performance.now(),l=new Set,c=new G((o,m)=>o.cost-m.cost);let a=0;const d={board:n,pieces:t,stateString:T(n),cost:0,moves:[]};c.push(d);let r={cost:1/0,moves:[]};for(;!c.isEmpty();){a++;const o=c.pop();if(l.has(o.stateString))continue;if(l.add(o.stateString),F(o.pieces)){(!r||o.cost<r.cost)&&(r={cost:o.cost,moves:[...o.moves]});const h=performance.now();return{solved:!0,moves:o.moves,nodesVisited:a,executionTime:h-i}}if(o.cost>s)continue;const m=V(o.board,o.pieces);for(const h of m){const g=_(o.board,o.pieces,h),f=T(g.board);if(l.has(f))continue;const b={board:g.board,pieces:g.pieces,stateString:f,cost:o.cost+1,moves:[...o.moves,h]};c.push(b)}}const u=performance.now();return{solved:r.cost!==1/0,moves:r.moves,nodesVisited:a,executionTime:u-i}},L={greedy:xe,ucs:we,astar:pe,dijkstra:be},M={manhattan:(n,t)=>{const s=Object.values(t).find(l=>l.isPrimary),i=t.K.positions[0];if(s.orientation==="horizontal")if(i.col<s.positions[0].col){const l=s.positions[0];return Math.abs(l.row-i.row)+Math.abs(l.col-i.col-1)}else{const l=s.positions[s.positions.length-1];return Math.abs(l.row-i.row)+Math.abs(l.col+1-i.col)}else{const l=s.positions.map(c=>Math.abs(c.row-i.row)+Math.abs(c.col-i.col));return Math.min(...l)}},blockingVehicles:(n,t)=>{const s=Object.values(t).find(c=>c.isPrimary),i=t.K.positions[0];if(s.orientation==="horizontal"){const c=s.positions[0].row;if(i.col<s.positions[0].col){const a=s.positions[0].col;let d=0;for(let r=i.col+1;r<a;r++)n[c][r]!=="."&&n[c][r]!=="K"&&d++;return d}else{const a=s.positions[s.positions.length-1].col;let d=0;for(let r=a+1;r<=i.col;r++)n[c][r]!=="."&&n[c][r]!=="K"&&d++;return d}}const l=s.positions[0].col;if(i.row<s.positions[0].row){const c=s.positions[0].row;let a=0;for(let d=i.row+1;d<c;d++)n[d][l]!=="."&&n[d][l]!=="K"&&a++;return a}else{const c=s.positions[s.positions.length-1].row;let a=0;for(let d=c+1;d<=i.row;d++)n[d][l]!=="."&&n[d][l]!=="K"&&a++;return a}},combined:(n,t)=>M.manhattan(n,t)+3*M.blockingVehicles(n,t)},ve=({isDarkMode:n,toggleDarkMode:t})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:t,className:`p-2 rounded-full ${n?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:n?"☀️":"🌙"})]}),e.jsx("p",{className:`mt-2 ${n?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),je=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,s,i)=>i?i.toUpperCase():s.toLowerCase()),D=n=>{const t=je(n);return t.charAt(0).toUpperCase()+t.slice(1)},ee=(...n)=>n.filter((t,s,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===s).join(" ").trim(),Ne=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Se={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=w.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:a,...d},r)=>w.createElement("svg",{ref:r,...Se,width:t,height:t,stroke:n,strokeWidth:i?Number(s)*24/Number(t):s,className:ee("lucide",l),...!c&&!Ne(d)&&{"aria-hidden":"true"},...d},[...a.map(([u,o])=>w.createElement(u,o)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=(n,t)=>{const s=w.forwardRef(({className:i,...l},c)=>w.createElement($e,{ref:c,iconNode:t,className:ee(`lucide-${ye(D(n))}`,`lucide-${n}`,i),...l}));return s.displayName=D(n),s};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ee=E("check",Ce);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z=E("chevron-right",Pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Te=E("clock",ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],Ke=E("fast-forward",ze);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Re=E("hard-drive",Ie);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Ae=E("move-horizontal",_e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],He=E("pause",Oe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Me=E("play",Le);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],Fe=E("rewind",Ve);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ue=E("rotate-ccw",Ge);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],We=E("upload",Be),qe=({isDarkMode:n,playSpeed:t,setPlaySpeed:s,isPlaying:i,playAnimation:l,stopAnimation:c,moveOneStep:a,applyStepMove:d,currentStep:r,solution:u})=>e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${n?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:t,onChange:o=>s(parseInt(o.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Fast"}),e.jsx("span",{children:"Slow"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>d(-1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(Fe,{size:18})}),e.jsx("button",{onClick:()=>a(!1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:r<0,title:"Previous step",children:e.jsx(Z,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:i?c:l,className:`p-3 rounded-full ${i?n?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":n?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:i?"Pause":"Play",children:i?e.jsx(He,{size:20}):e.jsx(Me,{size:20})}),e.jsx("button",{onClick:()=>a(!0),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:r>=((u==null?void 0:u.moves.length)||0)-1,title:"Next step",children:e.jsx(Z,{size:18})}),e.jsx("button",{onClick:()=>d(u.moves.length-1),className:`p-2 rounded-full ${n?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(Ke,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${n?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(r+1)/u.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",r===-1?"Start":r+1]}),e.jsxs("span",{children:["Total: ",u.moves.length]})]})]})]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),r>=0&&r<u.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]}),Xe=({stats:n,isDarkMode:t})=>e.jsxs("div",{className:`mt-6 ${t?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:`${t?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:n.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:`${t?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[n.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:`${t?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:n.moves})]})]})]})]}),Ze=({board:n,boardConfig:t,algorithm:s,setAlgorithm:i,heuristic:l,setHeuristic:c,solvePuzzle:a,isLoading:d,resetBoard:r,error:u,stats:o,isDarkMode:m,handleFileUpload:h})=>{var g;return e.jsxs("div",{className:`mb-8 ${m?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${m?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${m?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${m?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(We,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:h,className:"hidden"})]}),t&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx(Ee,{size:18})})]}),t&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",n.length,"x",((g=n[0])==null?void 0:g.length)||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${m?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:s,onChange:f=>i(f.target.value),className:`w-full border ${m?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:s==="greedy"?"Optimizes for quick solutions using heuristics":s==="ucs"?"Finds the shortest path by exploring all options":"Combines UCS with heuristics for efficient pathfinding"})]}),s!=="ucs"&&s!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${m?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:l,onChange:f=>c(f.target.value),className:`w-full border ${m?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:l==="manhattan"?"Measures direct distance to exit":l==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[e.jsx("button",{onClick:a,disabled:d||!t,className:`${m?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(Z,{size:16,className:"ml-1"})]})}),t&&e.jsxs("button",{onClick:r,className:`${m?"bg-gray-600 hover:bg-gray-700":"bg-gray-300 hover:bg-gray-400"} py-3 px-6 rounded-md flex items-center transition-colors shadow-sm`,children:[e.jsx(Ue,{size:16,className:"mr-1"}),"Reset"]})]}),u&&e.jsxs("div",{className:`mt-4 ${m?"bg-red-900/30":"bg-red-50"} border ${m?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:u})]}),o&&e.jsx(Xe,{stats:o,isDarkMode:m})]})};function Ye(){const[n,t]=w.useState(null),[s,i]=w.useState([]),[l,c]=w.useState({}),[a,d]=w.useState("greedy"),[r,u]=w.useState("manhattan"),[o,m]=w.useState(null),[h,g]=w.useState(-1),[f,b]=w.useState(!1),[v,x]=w.useState(null),[N,S]=w.useState([]),[A,O]=w.useState(null),[U,B]=w.useState(!1),[W,te]=w.useState(500),P=w.useRef(null),[y,se]=w.useState(!1);w.useEffect(()=>{m(null),O(null),g(-1),R(),s.length>0&&S(I(s))},[a,s,r]);const oe=p=>{var k;const j=(k=p.target.files)==null?void 0:k[0];if(!j)return;b(!0),x(null),m(null),O(null),g(-1),R(),i([]),c({}),S([]),t(null),d("greedy"),u("manhattan");const $=new FileReader;$.onload=H=>{var Q;try{const K=(Q=H.target)==null?void 0:Q.result,q=ge(K),Y=q.boardConfig.map(de=>de.split("")),ae=fe(q.boardConfig);t(q),i(Y),c(ae),S(Y),b(!1)}catch(K){K instanceof Error?x("Error parsing file: "+(K==null?void 0:K.message)):x("An unknown error occurred"),b(!1)}},$.onerror=()=>{x("Error reading file"),b(!1)},$.readAsText(j)},ne=()=>{if(!s.length||!Object.keys(l).length){x("Please upload a valid board configuration first.");return}b(!0),m(null),O(null),g(-1),R(),setTimeout(()=>{try{let p;if(a==="greedy")p=L.greedy(s,l,M[r]);else if(a==="ucs")p=L.ucs(s,l);else if(a==="astar")p=L.astar(s,l,M[r]);else if(a==="dijkstra")p=L.dijkstra(s,l);else throw new Error("Invalid algorithm");p.solved?(m(p),O({nodesVisited:p.nodesVisited,executionTime:p.executionTime.toFixed(2),moves:p.moves.length}),S(I(s))):x("No solution found"),b(!1)}catch(p){p instanceof Error?x("Error solving puzzle: "+(p==null?void 0:p.message)):x("An unknown error occurred"),b(!1)}},50)},z=w.useCallback(p=>{if(!o||p<-1||p>=o.moves.length)return;let j=I(s),$={...l};if(p===-1){S(I(s)),g(-1);return}for(let k=0;k<=p;k++){const H=_(j,$,o.moves[k]);j=H.board,$=H.pieces}S(j),g(p)},[s,l,o]),J=()=>{s.length&&(S(I(s)),g(-1),R())},re=()=>{!o||o.moves.length===0||(h>=o.moves.length-1&&J(),B(!0))},R=()=>{B(!1),P.current&&(clearTimeout(P.current),P.current=null)};w.useEffect(()=>{if(!U||!o)return;P.current&&clearTimeout(P.current);const p=h+1;if(p>=o.moves.length){B(!1);return}return P.current=setTimeout(()=>{z(p)},W),()=>{P.current&&clearTimeout(P.current)}},[U,h,o,W,z]);const ie=p=>{o&&(p&&h<o.moves.length-1?z(h+1):!p&&h>-1&&z(h-1))};w.useEffect(()=>()=>{P.current&&clearTimeout(P.current)},[]);const le=p=>{const j=y?"bg-gray-800":"bg-gray-200";if(p==="P")return"bg-red-500 text-white shadow-md";if(p==="K")return"bg-green-500 text-white shadow-md";if(o&&h>=0&&h<o.moves.length){const $=o.moves[h];if($&&p===$.piece)return"bg-yellow-500 text-white shadow-md"}return p!=="."?`${ue[p]||"bg-gray-500"} text-white shadow-md`:j},ce=()=>{se(!y)};return e.jsx("div",{className:`min-h-screen ${y?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(ve,{isDarkMode:y,toggleDarkMode:ce}),e.jsxs("div",{className:"relative",children:[f&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${y?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(Ze,{board:s,setBoard:i,boardConfig:n,setBoardConfig:t,algorithm:a,setAlgorithm:d,heuristic:r,setHeuristic:u,solvePuzzle:ne,isLoading:f,resetBoard:J,error:v,stats:A,isDarkMode:y,handleFileUpload:oe})]}),N.length>0&&e.jsxs("div",{className:`mb-8 ${y?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${y?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${y?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:N.map((p,j)=>e.jsx("div",{className:"flex",children:p.map(($,k)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${le($)} transition-all duration-300`,children:$!=="."?$:""},`cell-${j}-${k}`))},`row-${j}`))}),o&&e.jsx(qe,{isDarkMode:y,playSpeed:W,setPlaySpeed:te,isPlaying:U,playAnimation:re,stopAnimation:R,moveOneStep:ie,applyStepMove:z,currentStep:h,solution:o})]})]}),o&&o.moves.length>0&&e.jsxs("div",{className:`${y?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${y?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>z(-1),className:`cursor-pointer p-3 rounded-lg ${h===-1?y?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":y?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),o.moves.map((p,j)=>e.jsxs("div",{onClick:()=>z(j),className:`cursor-pointer p-3 rounded-lg ${h===j?y?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":y?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",j+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",p.piece]})]}),e.jsxs("div",{className:`text-sm ${y?"text-gray-300":"text-gray-600"}`,children:["Direction: ",p.direction]})]},j))]})]}),e.jsxs("footer",{className:`mt-12 text-center text-sm ${y?"text-gray-400":"text-gray-500"}`,children:[e.jsx("p",{children:"Rush Hour Game Solver © 2025 | Created for Strategi dan Algoritma Tucil 3 ITB"}),e.jsx("p",{className:"mt-1",children:"13523008 & 13523036"})]})]})})}export{Ye as default};

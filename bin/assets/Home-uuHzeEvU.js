var me=Object.defineProperty;var ue=(r,s,o)=>s in r?me(r,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[s]=o;var se=(r,s,o)=>ue(r,typeof s!="symbol"?s+"":s,o);import{j as e,r as $}from"./index-BkAav_64.js";import{c as M,L as ge}from"./Layout-DDBZdj-8.js";const G=r=>r.map(s=>[...s]),H=(r,s,o)=>{const{piece:i,direction:n,steps:l=1}=o,a=G(r),u={...s},m=u[i];if(!m)throw new Error(`Piece ${i} not found`);const d=[...m.positions];for(const c of d)a[c.row][c.col]=".";let t=[];for(let c=0;c<l;c++)if(c===0?t=re(d,n):t=re(t,n),!fe(t,a)){if(c>0)break;t=d;break}u[i]={...m,positions:t};for(const c of t)a[c.row][c.col]=i;return{board:a,pieces:u}};function re(r,s){return r.map(o=>{const i={...o};switch(s){case"atas":i.row-=1;break;case"bawah":i.row+=1;break;case"kiri":i.col-=1;break;case"kanan":i.col+=1;break}return i})}function fe(r,s){return r.every(o=>o.row<0||o.row>=s.length||o.col<0||o.col>=s[0].length?!1:s[o.row][o.col]==="."||s[o.row][o.col]==="K")}const O=r=>r.map(s=>s.join("")).join(""),Z={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},pe={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},X=(r,s)=>{if(be(s))return[];const o=[],i=r.length,n=r[0].length,l=s.K,a=l==null?void 0:l.positions[0],u=(a==null?void 0:a.col)===0&&a.row<i,m=(a==null?void 0:a.row)===0&&a.col<n,d=(a==null?void 0:a.col)===n-1&&a.row<i,t=(a==null?void 0:a.row)===i-1&&a.col<n;return Object.values(s).forEach(c=>{if(c.isExit)return;const{orientation:h,symbol:w}=c;if(h){if(h==="horizontal"){const b=c.positions[0];if(b.col>0&&!(u&&b.col===1&&!c.isPrimary)){let g=0,x=!0;for(;x&&b.col-g-1>=0;)r[b.row][b.col-g-1]==="."?(g++,o.push({piece:w,direction:Z.LEFT,steps:g})):x=!1}const v=c.positions[c.positions.length-1];if(v.col<n-1&&!(d&&v.col===n-2&&!c.isPrimary)){let g=0,x=!0;for(;x&&v.col+g+1<n;)r[v.row][v.col+g+1]==="."?(g++,o.push({piece:w,direction:Z.RIGHT,steps:g})):x=!1}}else if(h==="vertical"){const b=c.positions[0];if(b.row>0&&!(m&&b.row===1&&!c.isPrimary)){let g=0,x=!0;for(;x&&b.row-g-1>=0;)r[b.row-g-1][b.col]==="."?(g++,o.push({piece:w,direction:Z.UP,steps:g})):x=!1}const v=c.positions[c.positions.length-1];if(v.row<i-1&&!(t&&v.row===i-2&&!c.isPrimary)){let g=0,x=!0;for(;x&&v.row+g+1<i;)r[v.row+g+1][v.col]==="."?(g++,o.push({piece:w,direction:Z.DOWN,steps:g})):x=!1}}}}),o};function be(r){const s=Object.values(r).find(l=>l.isPrimary),o=r.K;if(!s||!o)return!1;const i=o.positions[0],n=s.positions;if(s.orientation==="horizontal"){const l=n[0],a=n[n.length-1];return i.row===l.row&&i.col===l.col-1||i.row===a.row&&i.col===a.col+1}else{const l=n[0],a=n[n.length-1];return i.col===l.col&&i.row===l.row-1||i.col===a.col&&i.row===a.row+1}}const W=r=>{const s=Object.values(r).find(n=>n.isPrimary);if(!s)return!1;const o=r.K;if(!o)return!1;const i=o.positions[0];if(s.orientation==="horizontal"){const n=s.positions[0];if(i.col<n.col)return n.row===i.row&&n.col===i.col+1;if(i.col>s.positions[s.positions.length-1].col){const l=s.positions[s.positions.length-1];return l.row===i.row&&l.col+1===i.col}}else if(s.orientation==="vertical"){const n=s.positions[0],l=s.positions[s.positions.length-1];if(i.row<n.row)return n.col===i.col&&n.row===i.row+1;if(i.row>l.row)return l.col===i.col&&l.row+1===i.row}return s.positions.some(n=>n.row===i.row&&n.col===i.col)};class D{constructor(s){se(this,"items",[]);se(this,"comparator");this.comparator=s}push(s){let o=this.items.length;for(this.items.push(s);o>0;){const i=Math.floor((o-1)/2);if(this.comparator(this.items[i],this.items[o])<=0)break;[this.items[i],this.items[o]]=[this.items[o],this.items[i]],o=i}}pop(){if(this.isEmpty())return;const s=this.items[0],o=this.items.pop();return this.items.length>0&&(this.items[0]=o,this.heapify(0)),s}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(s){const o=2*s+1,i=2*s+2;let n=s;o<this.items.length&&this.comparator(this.items[o],this.items[n])<0&&(n=o),i<this.items.length&&this.comparator(this.items[i],this.items[n])<0&&(n=i),n!==s&&([this.items[s],this.items[n]]=[this.items[n],this.items[s]],this.heapify(n))}}const xe=(r,s,o)=>{const i=r.length*r[0].length*50,n=performance.now(),l=new Set,a=new D((t,c)=>t.f-c.f);let u=0;const m={board:r,pieces:s,stateString:O(r),cost:0,heuristic:o(r,s),f:o(r,s),moves:[]};for(a.push(m);!a.isEmpty();){u++;const t=a.pop();if(l.has(t.stateString))continue;if(l.add(t.stateString),W(t.pieces)){const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:u,executionTime:h-n}}if(t.cost>i)continue;const c=X(t.board,t.pieces);for(const h of c){const{board:w,pieces:b}=H(t.board,t.pieces,h),v=O(w);if(l.has(v))continue;const g=o(w,b),x=t.cost+1;if(x>i)continue;const P={board:w,pieces:b,stateString:v,cost:x,heuristic:g,f:x+g,moves:[...t.moves,h]};a.push(P)}}const d=performance.now();return{solved:!1,moves:[],nodesVisited:u,executionTime:d-n}},we=(r,s)=>{const o=r.length*r[0].length*50,i=performance.now(),n=new Map,l=new D((d,t)=>d.cost-t.cost);let a=0;const u={board:r,pieces:s,stateString:O(r),cost:0,moves:[]};for(l.push(u),n.set(u.stateString,0);!l.isEmpty();){a++;const d=l.pop(),t=d.stateString;if(d.cost>(n.get(t)||1/0))continue;if(W(d.pieces)){const h=performance.now();return{solved:!0,moves:d.moves,nodesVisited:a,executionTime:h-i}}if(d.cost>o)continue;const c=X(d.board,d.pieces);for(const h of c){const{board:w,pieces:b}=H(d.board,d.pieces,h),v=O(w),g=d.cost+1;if(g<(n.get(v)||1/0)){n.set(v,g);const x={board:w,pieces:b,stateString:v,cost:g,moves:[...d.moves,h]};l.push(x)}}}const m=performance.now();return{solved:!1,moves:[],nodesVisited:a,executionTime:m-i}},ve=(r,s,o)=>{const i=r.length*r[0].length*50,n=performance.now(),l=new Set,a=new D((t,c)=>t.heuristic-c.heuristic);let u=0;const m={board:r,pieces:s,stateString:O(r),heuristic:o(r,s),moves:[],cost:0};for(a.push(m);!a.isEmpty();){u++;const t=a.pop();if(l.has(t.stateString))continue;if(l.add(t.stateString),W(t.pieces)){const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:u,executionTime:h-n}}if(t.cost>i)continue;const c=X(t.board,t.pieces);for(const h of c){const{board:w,pieces:b}=H(t.board,t.pieces,h),v=O(w);if(l.has(v))continue;const g=o(w,b),x=t.cost+1;if(x<=i){const P={board:w,pieces:b,stateString:v,heuristic:g,moves:[...t.moves,h],cost:x};a.push(P)}}}const d=performance.now();return{solved:!1,moves:[],nodesVisited:u,executionTime:d-n}},ye=(r,s)=>{const o=r.length*r[0].length*50,i=performance.now(),n=new Set,l=new D((t,c)=>t.cost-c.cost);let a=0;const u={board:r,pieces:s,stateString:O(r),cost:0,moves:[]};l.push(u);let m={cost:1/0,moves:[]};for(;!l.isEmpty();){a++;const t=l.pop();if(n.has(t.stateString))continue;if(n.add(t.stateString),W(t.pieces)){(!m||t.cost<m.cost)&&(m={cost:t.cost,moves:[...t.moves]});const h=performance.now();return{solved:!0,moves:t.moves,nodesVisited:a,executionTime:h-i}}if(t.cost>o)continue;const c=X(t.board,t.pieces);for(const h of c){const w=H(t.board,t.pieces,h),b=O(w.board);if(n.has(b))continue;const v={board:w.board,pieces:w.pieces,stateString:b,cost:t.cost+1,moves:[...t.moves,h]};l.push(v)}}const d=performance.now();return{solved:m.cost!==1/0,moves:m.moves,nodesVisited:a,executionTime:d-i}},L={manhattan:(r,s)=>{const o=Object.values(s).find(n=>n.isPrimary),i=s.K.positions[0];if(o.orientation==="horizontal")if(i.col<o.positions[0].col){const n=o.positions[0];return Math.abs(n.row-i.row)+Math.abs(n.col-i.col-1)}else{const n=o.positions[o.positions.length-1];return Math.abs(n.row-i.row)+Math.abs(n.col+1-i.col)}else{const n=o.positions.map(l=>Math.abs(l.row-i.row)+Math.abs(l.col-i.col));return Math.min(...n)}},blockingVehicles:(r,s)=>{const o=Object.values(s).find(l=>l.isPrimary),i=s.K.positions[0];if(o.orientation==="horizontal"){const l=o.positions[0].row;if(i.col<o.positions[0].col){const a=o.positions[0].col;let u=0;for(let m=i.col+1;m<a;m++)r[l][m]!=="."&&r[l][m]!=="K"&&u++;return u}else{const a=o.positions[o.positions.length-1].col;let u=0;for(let m=a+1;m<=i.col;m++)r[l][m]!=="."&&r[l][m]!=="K"&&u++;return u}}const n=o.positions[0].col;if(i.row<o.positions[0].row){const l=o.positions[0].row;let a=0;for(let u=i.row+1;u<l;u++)r[u][n]!=="."&&r[u][n]!=="K"&&a++;return a}else{const l=o.positions[o.positions.length-1].row;let a=0;for(let u=l+1;u<=i.row;u++)r[u][n]!=="."&&r[u][n]!=="K"&&a++;return a}},combined:(r,s)=>L.manhattan(r,s)+3*L.blockingVehicles(r,s)},je=(r,s,o)=>{const i=r.length*r[0].length*50,n=performance.now();let l=0;const a=o===L.blockingVehicles||o===L.combined,u=(b,v)=>a?Math.max(1,Math.min(L.manhattan(b,v),o(b,v))):o(b,v),m=new Map,d={board:r,pieces:s,stateString:O(r),cost:0,heuristic:u(r,s),f:u(r,s),moves:[]};m.set(d.stateString,0);let t=[d],c=[],h=d.f;for(;t.length>0||c.length>0;){if(t.length===0){if(c.length===0)break;let g=1/0;for(const x of c)g=Math.min(g,x.f);if(t=c.filter(x=>x.f===g),c=c.filter(x=>x.f>g),h=g,h>=i)break}const b=t.shift();if(l++,W(b.pieces)){const g=performance.now();return{solved:!0,moves:b.moves,nodesVisited:l,executionTime:g-n}}if(b.cost>=i)continue;const v=X(b.board,b.pieces);for(const g of v){const{board:x,pieces:P}=H(b.board,b.pieces,g),E=O(x),p=b.cost+1,y=m.get(E);if(y!==void 0&&y<=p)continue;m.set(E,p);const k=u(x,P),C=p+k,_={board:x,pieces:P,stateString:E,cost:p,heuristic:k,f:C,moves:[...b.moves,g]};C<=h?t.unshift(_):c.push(_)}}const w=performance.now();return{solved:!1,moves:[],nodesVisited:l,executionTime:w-n}},q={greedy:ve,ucs:ye,astar:xe,dijkstra:we,fringe:je},Ne=r=>{const s={},o=r.map(d=>d.split("")),i=new Set,n=new Set;let l=0;const a=24,u=d=>d==="."||d===" ",m=(d,t)=>{if(u(d)||u(t))return!1;const c=h=>/^[A-Za-z]$/.test(h);return c(d)&&c(t)?d===t:!1};for(let d=0;d<o.length;d++)for(let t=0;t<o[d].length;t++){const c=o[d][t],h=`${d},${t}`;if(!i.has(h)){if(u(c)){i.add(h);continue}if(c!=="K"){if(n.has(c))throw new Error(`Duplicate piece symbol '${c}' detected. Each letter can only be used once.`);if(l>=a)throw new Error(`Maximum number of pieces (${a}) exceeded.`);const w=[],b=[{row:d,col:t}],v=new Set;for(v.add(h);b.length>0;){const g=b.shift();w.push(g),i.add(`${g.row},${g.col}`);const x=[[-1,0],[1,0],[0,-1],[0,1]];for(const[P,E]of x){const p=g.row+P,y=g.col+E,k=`${p},${y}`;p>=0&&p<o.length&&y>=0&&y<o[p].length&&m(o[p][y],c)&&!v.has(k)&&(b.push({row:p,col:y}),v.add(k))}}s[c]={positions:w,symbol:c},n.add(c),l++}else c==="K"&&(s.K={positions:[{row:d,col:t}],symbol:"K",isExit:!0},i.add(h))}}return Object.values(s).forEach(d=>{if(d.isExit)return;const{positions:t}=d;if(d.size=t.length,t.length>1){const c=t.every(h=>h.row===t[0].row);if(d.orientation=c?"horizontal":"vertical",d.orientation==="horizontal"){t.sort((h,w)=>h.col-w.col);for(let h=1;h<t.length;h++)if(t[h].col!==t[h-1].col+1)throw new Error(`Piece ${d.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{t.sort((h,w)=>h.row-w.row);for(let h=1;h<t.length;h++)if(t[h].row!==t[h-1].row+1)throw new Error(`Piece ${d.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else d.orientation="unknown";d.primaryPosition=t[0],d.isPrimary=d.symbol==="P"}),s},Se=r=>{const s=r.replace(/\r/g,"").trim().split(`
`);if(s.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[o,i,...n]=s,[l,a]=o.split(" ").map(Number),u=parseInt(i);if(!Number.isInteger(l)||!Number.isInteger(a)||l<=0||a<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(u)||u<0)throw new Error("Invalid number of pieces.");const m={col:-1,row:-1};for(let p=0;p<n.length;p++){const y=n[p];if(y.includes("K")){if(m.col!==-1)throw new Error("There should be only one K in the board.");m.row=p,m.col=y.indexOf("K")}}if(m.col===-1||m.row===-1)throw new Error("There should be one K in the board.");const d=m.col===0&&n[m.row].length===l+1,t=m.row===0&&n.length===a+1,c=m.col===l&&n[m.row].length===l+1,h=m.row===a&&n.length===a+1;if(!d&&!t&&!c&&!h)throw new Error("K shouldnt be in the middle of the board.");const w=a+(h||t?1:0);if(n.length!==w)throw new Error(`Expected ${w} rows in boardConfig, got ${n.length}.`);n.forEach((p,y)=>{if(d){if(p.includes("K")){if(p.length!==l+1)throw new Error(`Each row must have ${l+1} columns.`)}else if(p.length!==l&&p.length!==l+1)throw new Error(`Each row must have ${l} or ${l+1} columns.`)}else if(c){if(p.includes("K")){if(p.length!==l+1)throw new Error(`Each row must have ${l+1} columns.`)}else if(p.length!==l&&p.length!==l+1)throw new Error(`Each row must have ${l} or ${l+1} columns.`)}else if(t){if(y!=0&&p.length!==l)throw new Error(`Each row must have ${l} columns.`)}else if(h){if(y!=a&&p.length!==l)throw new Error(`Each row must have ${l} columns.`)}else throw new Error("Unknown K location.")});let b=-1,v=-1,g="unknown";for(let p=0;p<n.length;p++){const y=n[p].indexOf("P");if(y!==-1){v=p,b=y,y+1<n[p].length&&n[p][y+1]==="P"?g="horizontal":p+1<n.length&&n[p+1][y]==="P"&&(g="vertical");break}}if(b===-1)throw new Error("Primary piece (P) not found on the board.");if(g==="horizontal"){if(v!==m.row)throw new Error("Exit (K) must be aligned with the primary piece (P).")}else if(g==="vertical"&&b!==m.col)throw new Error("Exit (K) must be aligned with the primary piece (P).");const x=new Set;n.forEach(p=>{for(const y of p)y!=="."&&y!==" "&&y!=="K"&&y!=="P"&&x.add(y)});const P=x.size;if(P!==u)throw new Error(`Mismatch in piece count: Input specifies ${u} pieces, but ${P} unique pieces found on board.`);const E={};n.forEach((p,y)=>{for(let k=0;k<p.length;k++){const C=p[k];C!=="."&&C!==" "&&C!=="K"&&(E[C]||(E[C]=[]),E[C].push({row:y,col:k}))}});for(const[p,y]of Object.entries(E)){const k=Math.min(...y.map(T=>T.row)),C=Math.max(...y.map(T=>T.row)),_=Math.min(...y.map(T=>T.col)),J=Math.max(...y.map(T=>T.col)),z=C-k+1,j=J-_+1,ee=z*j;if(y.length!==ee)throw new Error(`Piece ${p} is not a solid rectangle.`);if(j===1&&z===1)throw new Error(`Piece ${p} is a single square. It should be at least 2x1 or 1x2.`);if(j!==1&&z!==1)throw new Error(`Piece ${p} has invalid dimensions (${j}x${z}). At least one dimension must be 1.`);for(let T=k;T<=C;T++)for(let V=_;V<=J;V++)if(!y.some(R=>R.row===T&&R.col===V))throw new Error(`Piece ${p} is not solid (missing position at row ${T}, col ${V}).`)}return{dimensions:{A:l,B:a},numPieces:u,boardConfig:n,finishLocation:{col:m.col,row:m.row}}},$e=({isDarkMode:r,toggleDarkMode:s})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:s,className:`p-2 rounded-full ${r?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:r?"â˜€ï¸":"ðŸŒ™"})]}),e.jsx("p",{className:`mt-2 ${r?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ee=M("check",Pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oe=M("chevron-right",ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ze=M("clock",Ce);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],Ie=M("fast-forward",Te);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Me=M("hard-drive",Ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Oe=M("move-horizontal",Re);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Ae=M("pause",_e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],He=M("play",Le);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],Fe=M("rewind",Ve);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ue=M("rotate-ccw",Ge);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],qe=M("upload",Be),Xe=({isDarkMode:r,playSpeed:s,setPlaySpeed:o,isPlaying:i,playAnimation:n,stopAnimation:l,moveOneStep:a,applyStepMove:u,currentStep:m,solution:d,saveSolution:t})=>{const c=1100-s;return e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${r?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:c,onChange:h=>{const w=parseInt(h.target.value,10);o(1100-w)},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Slow"}),e.jsx("span",{children:"Fast"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>u(-1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(Fe,{size:18})}),e.jsx("button",{onClick:()=>a(!1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:m<0,title:"Previous step",children:e.jsx(oe,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:i?l:n,className:`p-3 rounded-full ${i?r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:i?"Pause":"Play",children:i?e.jsx(Ae,{size:20}):e.jsx(He,{size:20})}),e.jsx("button",{onClick:()=>a(!0),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:m>=((d==null?void 0:d.moves.length)||0)-1,title:"Next step",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>u(d.moves.length-1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(Ie,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${r?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(m+1)/d.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",m===-1?"Start":m+1]}),e.jsxs("span",{children:["Total: ",d.moves.length]})]})]})]}),t&&e.jsxs("button",{onClick:t,className:`px-3 py-2 ${r?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"} text-white rounded-md text-sm font-medium w-full transition-colors shadow-sm flex items-center justify-center gap-1 mt-2`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Simpan Solusi ke File"]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),m>=0&&m<d.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]})},We=({stats:r,isDarkMode:s})=>e.jsxs("div",{className:`mt-6 ${s?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Me,{className:`${s?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:r.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ze,{className:`${s?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[r.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:`${s?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:r.moves})]})]})]})]}),Je=({boardConfig:r,algorithm:s,setAlgorithm:o,heuristic:i,setHeuristic:n,solvePuzzle:l,isLoading:a,resetBoard:u,error:m,setError:d,stats:t,isDarkMode:c,handleFileUpload:h})=>e.jsxs("div",{className:`mb-8 ${c?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${c?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${c?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(qe,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:h,onClick:()=>{m&&d(null)},className:"hidden"})]}),r&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx(Ee,{size:18})})]}),r&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",r.dimensions.A,"x",r.dimensions.B||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:s,onChange:w=>o(w.target.value),className:`w-full border ${c?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"}),e.jsx("option",{value:"fringe",children:"Fringe Search"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:s==="greedy"?"Optimizes for quick solutions using heuristics":s==="ucs"?"Finds the shortest path by exploring all options":s==="dijkstra"?"Finds the shortest path in weighted graphs":s==="astar"?"Combines heuristics with path cost for efficiency":"Fringe Search"})]}),s!=="ucs"&&s!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:i,onChange:w=>n(w.target.value),className:`w-full border ${c?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:i==="manhattan"?"Measures direct distance to exit":i==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[e.jsx("button",{onClick:l,disabled:a||!r,className:`${c?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(oe,{size:16,className:"ml-1"})]})}),r&&e.jsxs("button",{onClick:u,className:`${c?"bg-gray-600 hover:bg-gray-700":"bg-gray-300 hover:bg-gray-400"} py-3 px-6 rounded-md flex items-center transition-colors shadow-sm`,children:[e.jsx(Ue,{size:16,className:"mr-1"}),"Reset"]})]}),m&&e.jsxs("div",{className:`mt-4 ${c?"bg-red-900/30":"bg-red-50"} border ${c?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:m})]}),t&&e.jsx(We,{stats:t,isDarkMode:c})]});function De(){const[r,s]=$.useState(null),[o,i]=$.useState([]),[n,l]=$.useState({}),[a,u]=$.useState("greedy"),[m,d]=$.useState("manhattan"),[t,c]=$.useState(null),[h,w]=$.useState(-1),[b,v]=$.useState(!1),[g,x]=$.useState(null),[P,E]=$.useState([]),[p,y]=$.useState(null),[k,C]=$.useState(!1),[_,J]=$.useState(500),z=$.useRef(null),[j,ee]=$.useState(!1);$.useEffect(()=>{c(null),y(null),w(-1),U(),o.length>0&&E(G(o))},[a,o,m]);const T=f=>{var K;const N=(K=f.target.files)==null?void 0:K[0];if(!N)return;v(!0),x(""),c(null),y(null),w(-1),U(),i([]),l({}),E([]),s(null),u("greedy"),d("manhattan");const S=new FileReader;S.onload=F=>{var B;try{const I=(B=F.target)==null?void 0:B.result,A=Se(I),Q=A.boardConfig.map(te=>te.split("")),Y=Ne(A.boardConfig);s(A),i(Q),l(Y),E(Q),v(!1)}catch(I){I instanceof Error?x("Error parsing file: "+(I==null?void 0:I.message)):x("An unknown error occurred"),v(!1)}},S.onerror=()=>{x("Error reading file"),v(!1)},S.readAsText(N),f.target.value=""},V=()=>{if(!o.length||!Object.keys(n).length){x("Please upload a valid board configuration first.");return}x(""),v(!0),c(null),y(null),w(-1),U(),setTimeout(()=>{try{let f;if(a==="greedy")f=q.greedy(o,n,L[m]);else if(a==="ucs")f=q.ucs(o,n);else if(a==="astar")f=q.astar(o,n,L[m]);else if(a==="dijkstra")f=q.dijkstra(o,n);else if(a==="fringe")f=q.fringe(o,n,L[m]);else throw new Error("Invalid algorithm");f.solved?(c(f),y({nodesVisited:f.nodesVisited,executionTime:f.executionTime.toFixed(2),moves:f.moves.length}),E(G(o))):x("No solution found"),v(!1)}catch(f){f instanceof Error?x("Error solving puzzle: "+(f==null?void 0:f.message)):x("An unknown error occurred"),v(!1)}},50)},R=$.useCallback(f=>{if(!t||f<-1||f>=t.moves.length)return;let N=G(o),S={...n};if(f===-1){E(G(o)),w(-1);return}for(let K=0;K<=f;K++){const F=H(N,S,t.moves[K]);N=F.board,S=F.pieces}E(N),w(f)},[o,n,t]),ne=()=>{s(null),i([]),l({}),u("greedy"),d("manhattan"),c(null),y(null),w(-1),E([]),x(null),U()},ie=()=>{!t||t.moves.length===0||(h>=t.moves.length-1&&ne(),C(!0))},U=()=>{C(!1),z.current&&(clearTimeout(z.current),z.current=null)};$.useEffect(()=>{if(!k||!t)return;z.current&&clearTimeout(z.current);const f=h+1;if(f>=t.moves.length){C(!1);return}const N=t.moves[f],S=_/(N.steps||1);return z.current=setTimeout(()=>{R(f)},S),()=>{z.current&&clearTimeout(z.current)}},[k,h,t,_,R]);const le=f=>{t&&(f&&h<t.moves.length-1?R(h+1):!f&&h>-1&&R(h-1))};$.useEffect(()=>()=>{z.current&&clearTimeout(z.current)},[]);const ce=f=>{const N=j?"bg-gray-800":"bg-gray-200";if(f==="P")return"bg-red-500 text-white shadow-md";if(f==="K")return"bg-green-500 text-white shadow-md";if(t&&h>=0&&h<t.moves.length){const S=t.moves[h];if(S&&f===S.piece)return"bg-yellow-500 text-white shadow-md"}return f!=="."?`${pe[f]||"bg-gray-500"} text-white shadow-md`:N},ae=()=>{ee(!j)},de=()=>{if(!t||!o.length)return;let f=`Papan Awal
`;const N=o.map(A=>A.join("")).join(`
`);f+=N+`


`;let S=G(o),K={...n};t.moves.forEach((A,Q)=>{const Y=H(S,K,A);S=Y.board,K=Y.pieces,f+=`Gerakan ${Q+1}: ${A.piece}-${A.direction}
`;const te=S.map(he=>he.join("")).join(`
`);f+=te+`


`});const F=new Blob([f],{type:"text/plain"}),B=URL.createObjectURL(F),I=document.createElement("a");I.href=B,I.download="rush_hour_solution.txt",document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(B)};return e.jsx(ge,{children:e.jsx("div",{className:`min-h-screen ${j?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx($e,{isDarkMode:j,toggleDarkMode:ae}),e.jsxs("div",{className:"relative",children:[b&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(Je,{setBoard:i,boardConfig:r,setBoardConfig:s,algorithm:a,setAlgorithm:u,heuristic:m,setHeuristic:d,solvePuzzle:V,isLoading:b,resetBoard:ne,error:g,setError:x,stats:p,isDarkMode:j,handleFileUpload:T})]}),P.length>0&&e.jsxs("div",{className:`mb-8 ${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${j?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:P.map((f,N)=>e.jsx("div",{className:"flex",children:f.map((S,K)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${ce(S)} transition-all duration-300`,children:S!=="."?S:""},`cell-${N}-${K}`))},`row-${N}`))}),t&&e.jsx(Xe,{isDarkMode:j,playSpeed:_,setPlaySpeed:J,isPlaying:k,playAnimation:ie,stopAnimation:U,moveOneStep:le,applyStepMove:R,currentStep:h,solution:t,saveSolution:de})]})]}),t&&t.moves.length>0&&e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>R(-1),className:`cursor-pointer p-3 rounded-lg ${h===-1?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),t.moves.map((f,N)=>e.jsxs("div",{onClick:()=>R(N),className:`cursor-pointer p-3 rounded-lg ${h===N?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",N+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",f.piece]})]}),e.jsxs("div",{className:`text-sm ${j?"text-gray-300":"text-gray-600"}`,children:["Direction: ",f.direction," ",f.steps>1?`(${f.steps} steps)`:""]})]},N))]})]})]})})})}export{De as default};

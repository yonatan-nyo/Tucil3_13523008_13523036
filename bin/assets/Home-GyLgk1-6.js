var he=Object.defineProperty;var me=(r,o,s)=>o in r?he(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s;var Z=(r,o,s)=>me(r,typeof o!="symbol"?o+"":o,s);import{j as e,r as v}from"./index-BNCg_xeG.js";import{c as P,L as ue}from"./Layout-B_G1s7Hq.js";const $={UP:"atas",DOWN:"bawah",LEFT:"kiri",RIGHT:"kanan"},ge={A:"bg-blue-500",B:"bg-purple-500",C:"bg-pink-500",D:"bg-indigo-500",E:"bg-teal-500",F:"bg-cyan-500",G:"bg-orange-500",H:"bg-lime-500",I:"bg-amber-500",J:"bg-emerald-500",L:"bg-rose-500",M:"bg-sky-500",N:"bg-violet-500",O:"bg-fuchsia-500"},O=r=>r.map(o=>[...o]),fe=r=>{const o=r.replace(/\r/g,"").trim().split(`
`);if(o.length<2)throw new Error("Input file must have at least 2 lines (dimensions and numPieces).");const[s,i,...n]=o,[d,m]=s.split(" ").map(Number),g=parseInt(i);if(!Number.isInteger(d)||!Number.isInteger(m)||d<=0||m<=0)throw new Error("Invalid board dimensions.");if(!Number.isInteger(g)||g<0)throw new Error("Invalid number of pieces.");const h={col:-1,row:-1};for(let u=0;u<n.length;u++){const p=n[u];if(p.includes("K")){if(h.col!==-1)throw new Error("There should be only one K in the board.");h.row=u,h.col=p.indexOf("K")}}if(h.col===-1||h.row===-1)throw new Error("There should be one K in the board.");const a=h.col===0&&h.col<m,t=h.col<=d&&h.row===0,c=h.col===d&&h.row<m,l=h.col<d&&h.row===m;if(!a&&!t&&!c&&!l)throw new Error("K shouldnt be in the middle of the board.");if(n.length!==m+(t||l?1:0))throw new Error(`Expected ${m} rows in boardConfig, got ${n.length}.`);return n.forEach((u,p)=>{if(a){if(u.length!==d+1)throw new Error(`Each row must have ${d+1} columns.`)}else if(c){if(u.includes("K")){if(u.length!==d+1)throw new Error(`Each row must have ${d+1} columns.`)}else if(u.length!==d&&u.length!==d+1)throw new Error(`Each row must have ${d} or ${d+1} columns.`)}else if(t){if(p!=0&&u.length!==d)throw new Error(`Each row must have ${d} columns.`)}else if(l){if(p!=m&&u.length!==d)throw new Error(`Each row must have ${d} columns.`)}else throw new Error("Unknown K location.")}),{dimensions:{A:d,B:m},numPieces:g,boardConfig:n,finishLocation:{col:h.col,row:h.row}}},pe=r=>{const o={},s=r.map(a=>a.split("")),i=new Set,n=new Set;let d=0;const m=24,g=a=>a==="."||a===" ",h=(a,t)=>{if(g(a)||g(t))return!1;const c=l=>/^[A-Za-z]$/.test(l);return c(a)&&c(t)?a===t:!1};for(let a=0;a<s.length;a++)for(let t=0;t<s[a].length;t++){const c=s[a][t],l=`${a},${t}`;if(!i.has(l)){if(g(c)){i.add(l);continue}if(c!=="K"){if(n.has(c))throw new Error(`Duplicate piece symbol '${c}' detected. Each letter can only be used once.`);if(d>=m)throw new Error(`Maximum number of pieces (${m}) exceeded.`);const u=[],p=[{row:a,col:t}],b=new Set;for(b.add(l);p.length>0;){const x=p.shift();u.push(x),i.add(`${x.row},${x.col}`);const w=[[-1,0],[1,0],[0,-1],[0,1]];for(const[K,T]of w){const I=x.row+K,C=x.col+T,L=`${I},${C}`;I>=0&&I<s.length&&C>=0&&C<s[I].length&&h(s[I][C],c)&&!b.has(L)&&(p.push({row:I,col:C}),b.add(L))}}o[c]={positions:u,symbol:c},n.add(c),d++}else c==="K"&&(o.K={positions:[{row:a,col:t}],symbol:"K",isExit:!0},i.add(l))}}return Object.values(o).forEach(a=>{if(a.isExit)return;const{positions:t}=a;if(a.size=t.length,t.length>1){const c=t.every(l=>l.row===t[0].row);if(a.orientation=c?"horizontal":"vertical",a.orientation==="horizontal"){t.sort((l,u)=>l.col-u.col);for(let l=1;l<t.length;l++)if(t[l].col!==t[l-1].col+1)throw new Error(`Piece ${a.symbol} has non-contiguous horizontal positions. Each piece must form a continuous line.`)}else{t.sort((l,u)=>l.row-u.row);for(let l=1;l<t.length;l++)if(t[l].row!==t[l-1].row+1)throw new Error(`Piece ${a.symbol} has non-contiguous vertical positions. Each piece must form a continuous line.`)}}else a.orientation="unknown";a.primaryPosition=t[0],a.isPrimary=a.symbol==="P"}),o},R=r=>r.map(o=>o.join("")).join(""),W=(r,o)=>{const s=[],i=r.length,n=r[0].length,d=o.K,m=d==null?void 0:d.positions[0],g=(m==null?void 0:m.col)===0&&m.row<i,h=(m==null?void 0:m.row)===0&&m.col<n,a=(m==null?void 0:m.col)===n-1&&m.row<i,t=(m==null?void 0:m.row)===i-1&&m.col<n;return Object.values(o).forEach(c=>{if(c.isExit)return;const{orientation:l,symbol:u}=c;if(l){if(l==="horizontal"){const p=c.positions[0];if(p.col>0&&!(g&&p.col===1&&!c.isPrimary)){const w=r[p.row][p.col-1];w==="."?s.push({piece:u,direction:$.LEFT}):w==="K"&&c.isPrimary&&s.push({piece:u,direction:$.LEFT})}const b=c.positions[c.positions.length-1],x=b.col+1;if(x<n&&!(a&&x===n-1&&!c.isPrimary)){const w=r[b.row][x];w==="."?s.push({piece:u,direction:$.RIGHT}):w==="K"&&c.isPrimary&&s.push({piece:u,direction:$.RIGHT})}}else if(l==="vertical"){const p=c.positions[0];if(p.row>0&&!(h&&p.row===1&&!c.isPrimary)){const x=r[p.row-1][p.col];x==="."?s.push({piece:u,direction:$.UP}):x==="K"&&c.isPrimary&&s.push({piece:u,direction:$.UP})}const b=c.positions[c.positions.length-1];if(b.row+1<i&&!(t&&b.row===i-2&&!c.isPrimary)){const x=r[b.row+1][b.col];x==="."?s.push({piece:u,direction:$.DOWN}):x==="K"&&c.isPrimary&&s.push({piece:u,direction:$.DOWN})}}}}),s},H=(r,o,s)=>{const i=O(r),{piece:n,direction:d}=s,m=o[n];if(!m.orientation)return{board:i,pieces:{...o}};const{orientation:g,positions:h}=m,a=[...h];if(g==="horizontal"){if(d===$.LEFT){const c=h[h.length-1];i[c.row][c.col]=".";const l={row:h[0].row,col:h[0].col-1};i[l.row][l.col]=n,a.pop(),a.unshift(l)}else if(d===$.RIGHT){const c=h[0];i[c.row][c.col]=".";const l={row:h[h.length-1].row,col:h[h.length-1].col+1};i[l.row][l.col]==="K"||(i[l.row][l.col]=n),a.shift(),a.push(l)}}else if(g==="vertical"){if(d===$.UP){const c=h[h.length-1];i[c.row][c.col]=".";const l={row:h[0].row-1,col:h[0].col};i[l.row][l.col]=n,a.pop(),a.unshift(l)}else if(d===$.DOWN){const c=h[0];i[c.row][c.col]=".";const l={row:h[h.length-1].row+1,col:h[h.length-1].col};i[l.row][l.col]=n,a.shift(),a.push(l)}}const t={...o};return t[n]={...m,positions:a,primaryPosition:a[0]},{board:i,pieces:t}},q=r=>{const o=Object.values(r).find(n=>n.isPrimary);if(!o)return!1;const s=r.K;if(!s)return!1;const i=s.positions[0];if(o.orientation==="horizontal"){const n=o.positions[0];if(i.col<n.col)return n.row===i.row&&n.col===i.col+1;if(i.col>o.positions[o.positions.length-1].col){const d=o.positions[o.positions.length-1];return d.row===i.row&&d.col+1===i.col}}else if(o.orientation==="vertical"){const n=o.positions[0],d=o.positions[o.positions.length-1];if(i.row<n.row)return n.col===i.col&&n.row===i.row+1;if(i.row>d.row)return d.col===i.col&&d.row+1===i.row}return o.positions.some(n=>n.row===i.row&&n.col===i.col)};class X{constructor(o){Z(this,"items",[]);Z(this,"comparator");this.comparator=o}push(o){let s=this.items.length;for(this.items.push(o);s>0;){const i=Math.floor((s-1)/2);if(this.comparator(this.items[i],this.items[s])<=0)break;[this.items[i],this.items[s]]=[this.items[s],this.items[i]],s=i}}pop(){if(this.isEmpty())return;const o=this.items[0],s=this.items.pop();return this.items.length>0&&(this.items[0]=s,this.heapify(0)),o}isEmpty(){return this.items.length===0}size(){return this.items.length}heapify(o){const s=2*o+1,i=2*o+2;let n=o;s<this.items.length&&this.comparator(this.items[s],this.items[n])<0&&(n=s),i<this.items.length&&this.comparator(this.items[i],this.items[n])<0&&(n=i),n!==o&&([this.items[o],this.items[n]]=[this.items[n],this.items[o]],this.heapify(n))}}const be=(r,o,s)=>{const i=r.length*r[0].length*35,n=performance.now(),d=new Set,m=new X((t,c)=>t.f-c.f);let g=0;const h={board:r,pieces:o,stateString:R(r),cost:0,heuristic:s(r,o),f:s(r,o),moves:[]};for(m.push(h);!m.isEmpty();){g++;const t=m.pop();if(d.has(t.stateString))continue;if(d.add(t.stateString),q(t.pieces)){const l=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:l-n}}if(t.cost>i)continue;const c=W(t.board,t.pieces);for(const l of c){const{board:u,pieces:p}=H(t.board,t.pieces,l),b=R(u);if(d.has(b))continue;const x=s(u,p),w=t.cost+1;if(w>i)continue;const K={board:u,pieces:p,stateString:b,cost:w,heuristic:x,f:w+x,moves:[...t.moves,l]};m.push(K)}}const a=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:a-n}},xe=(r,o)=>{const s=r.length*r[0].length*35,i=performance.now(),n=new Map,d=new X((a,t)=>a.cost-t.cost);let m=0;const g={board:r,pieces:o,stateString:R(r),cost:0,moves:[]};for(d.push(g),n.set(g.stateString,0);!d.isEmpty();){m++;const a=d.pop(),t=a.stateString;if(a.cost>(n.get(t)||1/0))continue;if(q(a.pieces)){const l=performance.now();return{solved:!0,moves:a.moves,nodesVisited:m,executionTime:l-i}}if(a.cost>s)continue;const c=W(a.board,a.pieces);for(const l of c){const{board:u,pieces:p}=H(a.board,a.pieces,l),b=R(u),x=a.cost+1;if(x<(n.get(b)||1/0)){n.set(b,x);const w={board:u,pieces:p,stateString:b,cost:x,moves:[...a.moves,l]};d.push(w)}}}const h=performance.now();return{solved:!1,moves:[],nodesVisited:m,executionTime:h-i}},we=(r,o,s)=>{const i=r.length*r[0].length*35,n=performance.now(),d=new Set,m=new X((t,c)=>t.heuristic-c.heuristic);let g=0;const h={board:r,pieces:o,stateString:R(r),heuristic:s(r,o),moves:[],cost:0};for(m.push(h);!m.isEmpty();){g++;const t=m.pop();if(d.has(t.stateString))continue;if(d.add(t.stateString),q(t.pieces)){const l=performance.now();return{solved:!0,moves:t.moves,nodesVisited:g,executionTime:l-n}}if(t.cost>i)continue;const c=W(t.board,t.pieces);for(const l of c){const{board:u,pieces:p}=H(t.board,t.pieces,l),b=R(u);if(d.has(b))continue;const x=s(u,p),w=t.cost+1;if(w<=i){const K={board:u,pieces:p,stateString:b,heuristic:x,moves:[...t.moves,l],cost:w};m.push(K)}}}const a=performance.now();return{solved:!1,moves:[],nodesVisited:g,executionTime:a-n}},ve=(r,o)=>{const s=r.length*r[0].length*35,i=performance.now(),n=new Set,d=new X((t,c)=>t.cost-c.cost);let m=0;const g={board:r,pieces:o,stateString:R(r),cost:0,moves:[]};d.push(g);let h={cost:1/0,moves:[]};for(;!d.isEmpty();){m++;const t=d.pop();if(n.has(t.stateString))continue;if(n.add(t.stateString),q(t.pieces)){(!h||t.cost<h.cost)&&(h={cost:t.cost,moves:[...t.moves]});const l=performance.now();return{solved:!0,moves:t.moves,nodesVisited:m,executionTime:l-i}}if(t.cost>s)continue;const c=W(t.board,t.pieces);for(const l of c){const u=H(t.board,t.pieces,l),p=R(u.board);if(n.has(p))continue;const b={board:u.board,pieces:u.pieces,stateString:p,cost:t.cost+1,moves:[...t.moves,l]};d.push(b)}}const a=performance.now();return{solved:h.cost!==1/0,moves:h.moves,nodesVisited:m,executionTime:a-i}},U={greedy:we,ucs:ve,astar:be,dijkstra:xe},B={manhattan:(r,o)=>{const s=Object.values(o).find(n=>n.isPrimary),i=o.K.positions[0];if(s.orientation==="horizontal")if(i.col<s.positions[0].col){const n=s.positions[0];return Math.abs(n.row-i.row)+Math.abs(n.col-i.col-1)}else{const n=s.positions[s.positions.length-1];return Math.abs(n.row-i.row)+Math.abs(n.col+1-i.col)}else{const n=s.positions.map(d=>Math.abs(d.row-i.row)+Math.abs(d.col-i.col));return Math.min(...n)}},blockingVehicles:(r,o)=>{const s=Object.values(o).find(d=>d.isPrimary),i=o.K.positions[0];if(s.orientation==="horizontal"){const d=s.positions[0].row;if(i.col<s.positions[0].col){const m=s.positions[0].col;let g=0;for(let h=i.col+1;h<m;h++)r[d][h]!=="."&&r[d][h]!=="K"&&g++;return g}else{const m=s.positions[s.positions.length-1].col;let g=0;for(let h=m+1;h<=i.col;h++)r[d][h]!=="."&&r[d][h]!=="K"&&g++;return g}}const n=s.positions[0].col;if(i.row<s.positions[0].row){const d=s.positions[0].row;let m=0;for(let g=i.row+1;g<d;g++)r[g][n]!=="."&&r[g][n]!=="K"&&m++;return m}else{const d=s.positions[s.positions.length-1].row;let m=0;for(let g=d+1;g<=i.row;g++)r[g][n]!=="."&&r[g][n]!=="K"&&m++;return m}},combined:(r,o)=>B.manhattan(r,o)+3*B.blockingVehicles(r,o)},ye=({isDarkMode:r,toggleDarkMode:o})=>e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold",children:[e.jsx("span",{className:"text-blue-500",children:"Rush Hour"})," Game Solver"]}),e.jsx("button",{onClick:o,className:`p-2 rounded-full ${r?"bg-yellow-400 text-gray-900":"bg-gray-800 text-white"}`,children:r?"☀️":"🌙"})]}),e.jsx("p",{className:`mt-2 ${r?"text-gray-300":"text-gray-600"}`,children:"A pathfinding solution for the classic Rush Hour puzzle game"})]});/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ne=P("check",je);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],D=P("chevron-right",Se);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ee=P("clock",$e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["polygon",{points:"13 19 22 12 13 5 13 19",key:"587y9g"}],["polygon",{points:"2 19 11 12 2 5 2 19",key:"3pweh0"}]],Ce=P("fast-forward",Pe);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Te=P("hard-drive",ke);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"m18 8 4 4-4 4",key:"1ak13k"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}]],Ke=P("move-horizontal",ze);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Re=P("pause",Ie);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Oe=P("play",_e);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["polygon",{points:"11 19 2 12 11 5 11 19",key:"14yba5"}],["polygon",{points:"22 19 13 12 22 5 22 19",key:"1pi1cj"}]],Ae=P("rewind",Le);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fe=P("rotate-ccw",He);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ve=P("upload",Me),Ge=({isDarkMode:r,playSpeed:o,setPlaySpeed:s,isPlaying:i,playAnimation:n,stopAnimation:d,moveOneStep:m,applyStepMove:g,currentStep:h,solution:a,saveSolution:t})=>e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:`${r?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner`,children:[e.jsx("h3",{className:"font-bold text-lg mb-3",children:"Playback Controls"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Animation Speed"}),e.jsx("input",{type:"range",min:"100",max:"1000",step:"100",value:o,onChange:c=>s(parseInt(c.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs opacity-75",children:[e.jsx("span",{children:"Fast"}),e.jsx("span",{children:"Slow"})]})]}),e.jsxs("div",{className:"flex justify-center space-x-3",children:[e.jsx("button",{onClick:()=>g(-1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to start",children:e.jsx(Ae,{size:18})}),e.jsx("button",{onClick:()=>m(!1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:h<0,title:"Previous step",children:e.jsx(D,{size:18,className:"transform rotate-180"})}),e.jsx("button",{onClick:i?d:n,className:`p-3 rounded-full ${i?r?"bg-red-600 hover:bg-red-700":"bg-red-500 hover:bg-red-600":r?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white transition-colors`,title:i?"Pause":"Play",children:i?e.jsx(Re,{size:20}):e.jsx(Oe,{size:20})}),e.jsx("button",{onClick:()=>m(!0),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,disabled:h>=((a==null?void 0:a.moves.length)||0)-1,title:"Next step",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>g(a.moves.length-1),className:`p-2 rounded-full ${r?"bg-gray-600 hover:bg-gray-500":"bg-gray-200 hover:bg-gray-300"} transition-colors`,title:"Go to end",children:e.jsx(Ce,{size:18})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm mb-1 opacity-75",children:"Progress"}),e.jsx("div",{className:"relative h-2 bg-gray-300 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full ${r?"bg-blue-600":"bg-blue-500"}`,style:{width:`${(h+1)/a.moves.length*100}%`}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-sm",children:[e.jsxs("span",{children:["Step ",h===-1?"Start":h+1]}),e.jsxs("span",{children:["Total: ",a.moves.length]})]})]})]}),t&&e.jsxs("button",{onClick:t,className:`px-3 py-2 ${r?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"} text-white rounded-md text-sm font-medium w-full transition-colors shadow-sm flex items-center justify-center gap-1 mt-2`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Simpan Solusi ke File"]}),e.jsxs("div",{className:"mt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-red-500 mr-2"}),e.jsx("span",{children:"Red (P): Player's vehicle"})]}),h>=0&&h<a.moves.length&&e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-yellow-500 mr-2"}),e.jsx("span",{children:"Yellow: Current moving piece"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm bg-green-500 mr-2"}),e.jsx("span",{children:"Green (K): Exit/Goal"})]})]})]}),Ue=({stats:r,isDarkMode:o})=>e.jsxs("div",{className:`mt-6 ${o?"bg-blue-900/30 border-blue-800":"bg-blue-50 border-blue-200"} border p-4 rounded-md`,children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Results"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Nodes Visited"}),e.jsx("div",{className:"font-bold text-xl",children:r.nodesVisited.toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Execution Time"}),e.jsxs("div",{className:"font-bold text-xl",children:[r.executionTime," ms"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ke,{className:`${o?"text-blue-400":"text-blue-600"} mr-2`,size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm opacity-75",children:"Solution Moves"}),e.jsx("div",{className:"font-bold text-xl",children:r.moves})]})]})]})]}),Be=({board:r,boardConfig:o,algorithm:s,setAlgorithm:i,heuristic:n,setHeuristic:d,solvePuzzle:m,isLoading:g,resetBoard:h,error:a,stats:t,isDarkMode:c,handleFileUpload:l})=>{var u;return e.jsxs("div",{className:`mb-8 ${c?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${c?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"1"})}),"Configure Solver"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Board Configuration"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("label",{className:`cursor-pointer ${c?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600"} text-white py-2 px-4 rounded-md flex items-center transition-colors`,children:[e.jsx(Ve,{size:16,className:"mr-2"}),"Upload File",e.jsx("input",{type:"file",accept:".txt",onChange:l,className:"hidden"})]}),o&&e.jsx("span",{className:"ml-3 text-green-500",children:e.jsx(Ne,{size:18})})]}),o&&e.jsxs("div",{className:"mt-2 text-sm opacity-75",children:["Board size: ",r.length,"x",((u=r[0])==null?void 0:u.length)||0]})]}),e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Algorithm"}),e.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:`w-full border ${c?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"greedy",children:"Greedy Best First Search"}),e.jsx("option",{value:"ucs",children:"Uniform Cost Search (UCS)"}),e.jsx("option",{value:"astar",children:"A* Search"}),e.jsx("option",{value:"dijkstra",children:"Dijkstra's Algorithm"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:s==="greedy"?"Optimizes for quick solutions using heuristics":s==="ucs"?"Finds the shortest path by exploring all options":s==="dijkstra"?"Finds the shortest path in weighted graphs":"Combines heuristics with path cost for efficiency"})]}),s!=="ucs"&&s!=="dijkstra"&&e.jsxs("div",{className:`p-4 rounded-lg ${c?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Heuristic"}),e.jsxs("select",{value:n,onChange:p=>d(p.target.value),className:`w-full border ${c?"bg-gray-800 border-gray-600 text-white":"bg-white border-gray-300"} rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"manhattan",children:"Manhattan Distance"}),e.jsx("option",{value:"blockingVehicles",children:"Blocking Vehicles"}),e.jsx("option",{value:"combined",children:"Combined Heuristic"})]}),e.jsx("p",{className:"mt-2 text-sm opacity-75",children:n==="manhattan"?"Measures direct distance to exit":n==="blockingVehicles"?"Counts vehicles blocking the path":"Combines multiple metrics for better estimates"})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[e.jsx("button",{onClick:m,disabled:g||!o,className:`${c?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white py-3 px-6 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm`,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Solving..."]}):e.jsxs(e.Fragment,{children:["Solve Puzzle",e.jsx(D,{size:16,className:"ml-1"})]})}),o&&e.jsxs("button",{onClick:h,className:`${c?"bg-gray-600 hover:bg-gray-700":"bg-gray-300 hover:bg-gray-400"} py-3 px-6 rounded-md flex items-center transition-colors shadow-sm`,children:[e.jsx(Fe,{size:16,className:"mr-1"}),"Reset"]})]}),a&&e.jsxs("div",{className:`mt-4 ${c?"bg-red-900/30":"bg-red-50"} border ${c?"border-red-800":"border-red-200"} text-red-600 p-3 rounded-md`,children:[e.jsx("p",{className:"font-medium",children:"Error"}),e.jsx("p",{children:a})]}),t&&e.jsx(Ue,{stats:t,isDarkMode:c})]})};function Je(){const[r,o]=v.useState(null),[s,i]=v.useState([]),[n,d]=v.useState({}),[m,g]=v.useState("greedy"),[h,a]=v.useState("manhattan"),[t,c]=v.useState(null),[l,u]=v.useState(-1),[p,b]=v.useState(!1),[x,w]=v.useState(null),[K,T]=v.useState([]),[I,C]=v.useState(null),[L,J]=v.useState(!1),[Q,te]=v.useState(500),k=v.useRef(null),[j,se]=v.useState(!1);v.useEffect(()=>{c(null),C(null),u(-1),F(),s.length>0&&T(O(s))},[m,s,h]);const oe=f=>{var E;const y=(E=f.target.files)==null?void 0:E[0];if(!y)return;b(!0),w(null),c(null),C(null),u(-1),F(),i([]),d({}),T([]),o(null),g("greedy"),a("manhattan");const N=new FileReader;N.onload=A=>{var M;try{const S=(M=A.target)==null?void 0:M.result,z=fe(S),V=z.boardConfig.map(Y=>Y.split("")),G=pe(z.boardConfig);o(z),i(V),d(G),T(V),b(!1)}catch(S){S instanceof Error?w("Error parsing file: "+(S==null?void 0:S.message)):w("An unknown error occurred"),b(!1)}},N.onerror=()=>{w("Error reading file"),b(!1)},N.readAsText(y)},ne=()=>{if(!s.length||!Object.keys(n).length){w("Please upload a valid board configuration first.");return}b(!0),c(null),C(null),u(-1),F(),setTimeout(()=>{try{let f;if(m==="greedy")f=U.greedy(s,n,B[h]);else if(m==="ucs")f=U.ucs(s,n);else if(m==="astar")f=U.astar(s,n,B[h]);else if(m==="dijkstra")f=U.dijkstra(s,n);else throw new Error("Invalid algorithm");f.solved?(c(f),C({nodesVisited:f.nodesVisited,executionTime:f.executionTime.toFixed(2),moves:f.moves.length}),T(O(s))):w("No solution found"),b(!1)}catch(f){f instanceof Error?w("Error solving puzzle: "+(f==null?void 0:f.message)):w("An unknown error occurred"),b(!1)}},50)},_=v.useCallback(f=>{if(!t||f<-1||f>=t.moves.length)return;let y=O(s),N={...n};if(f===-1){T(O(s)),u(-1);return}for(let E=0;E<=f;E++){const A=H(y,N,t.moves[E]);y=A.board,N=A.pieces}T(y),u(f)},[s,n,t]),ee=()=>{s.length&&(T(O(s)),u(-1),F())},ie=()=>{!t||t.moves.length===0||(l>=t.moves.length-1&&ee(),J(!0))},F=()=>{J(!1),k.current&&(clearTimeout(k.current),k.current=null)};v.useEffect(()=>{if(!L||!t)return;k.current&&clearTimeout(k.current);const f=l+1;if(f>=t.moves.length){J(!1);return}return k.current=setTimeout(()=>{_(f)},Q),()=>{k.current&&clearTimeout(k.current)}},[L,l,t,Q,_]);const re=f=>{t&&(f&&l<t.moves.length-1?_(l+1):!f&&l>-1&&_(l-1))};v.useEffect(()=>()=>{k.current&&clearTimeout(k.current)},[]);const le=f=>{const y=j?"bg-gray-800":"bg-gray-200";if(f==="P")return"bg-red-500 text-white shadow-md";if(f==="K")return"bg-green-500 text-white shadow-md";if(t&&l>=0&&l<t.moves.length){const N=t.moves[l];if(N&&f===N.piece)return"bg-yellow-500 text-white shadow-md"}return f!=="."?`${ge[f]||"bg-gray-500"} text-white shadow-md`:y},ce=()=>{se(!j)},ae=()=>{if(!t||!s.length)return;let f=`Papan Awal
`;const y=s.map(z=>z.join("")).join(`
`);f+=y+`


`;let N=O(s),E={...n};t.moves.forEach((z,V)=>{const G=H(N,E,z);N=G.board,E=G.pieces,f+=`Gerakan ${V+1}: ${z.piece}-${z.direction}
`;const Y=N.map(de=>de.join("")).join(`
`);f+=Y+`


`});const A=new Blob([f],{type:"text/plain"}),M=URL.createObjectURL(A),S=document.createElement("a");S.href=M,S.download="rush_hour_solution.txt",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(M)};return e.jsx(ue,{children:e.jsx("div",{className:`min-h-screen ${j?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} transition-colors duration-300`,children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx(ye,{isDarkMode:j,toggleDarkMode:ce}),e.jsxs("div",{className:"relative",children:[p&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-xl z-10",children:e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-lg shadow-xl flex flex-col items-center`,children:[e.jsx("div",{className:"w-16 h-16 border-4 border-t-transparent border-blue-500 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Solving puzzle..."}),e.jsx("p",{className:"text-sm opacity-75 mt-2",children:"This may take a moment"})]})}),e.jsx(Be,{board:s,setBoard:i,boardConfig:r,setBoardConfig:o,algorithm:m,setAlgorithm:g,heuristic:h,setHeuristic:a,solvePuzzle:ne,isLoading:p,resetBoard:ee,error:x,stats:I,isDarkMode:j,handleFileUpload:oe})]}),K.length>0&&e.jsxs("div",{className:`mb-8 ${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsx("h2",{className:"text-xl font-bold mb-4 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"2"})}),"Game Board"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsx("div",{className:`${j?"bg-gray-700":"bg-gray-100"} p-4 rounded-lg shadow-inner inline-block`,children:K.map((f,y)=>e.jsx("div",{className:"flex",children:f.map((N,E)=>e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center m-0.5 rounded-md text-lg font-bold ${le(N)} transition-all duration-300`,children:N!=="."?N:""},`cell-${y}-${E}`))},`row-${y}`))}),t&&e.jsx(Ge,{isDarkMode:j,playSpeed:Q,setPlaySpeed:te,isPlaying:L,playAnimation:ie,stopAnimation:F,moveOneStep:re,applyStepMove:_,currentStep:l,solution:t,saveSolution:ae})]})]}),t&&t.moves.length>0&&e.jsxs("div",{className:`${j?"bg-gray-800":"bg-white"} p-6 rounded-xl shadow-md transition-colors duration-300`,children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${j?"bg-blue-600":"bg-blue-500"} flex items-center justify-center mr-2`,children:e.jsx("span",{className:"text-white",children:"3"})}),"Solution Steps"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:[e.jsxs("div",{onClick:()=>_(-1),className:`cursor-pointer p-3 rounded-lg ${l===-1?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsx("div",{className:"font-bold",children:"Initial Board"}),e.jsx("div",{className:"text-sm opacity-75",children:"Starting position"})]},"initial"),t.moves.map((f,y)=>e.jsxs("div",{onClick:()=>_(y),className:`cursor-pointer p-3 rounded-lg ${l===y?j?"bg-blue-900/40 border-blue-700":"bg-blue-100 border-blue-300":j?"bg-gray-700 hover:bg-gray-600":"bg-gray-50 hover:bg-gray-100"} border transition-colors`,children:[e.jsxs("div",{className:"font-bold flex justify-between",children:[e.jsxs("span",{children:["Move ",y+1]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Piece ",f.piece]})]}),e.jsxs("div",{className:`text-sm ${j?"text-gray-300":"text-gray-600"}`,children:["Direction: ",f.direction]})]},y))]})]})]})})})}export{Je as default};
